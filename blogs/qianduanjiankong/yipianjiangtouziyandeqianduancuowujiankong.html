<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.62">
    <script>
      (function() {
        const userMode = localStorage.getItem('vuepress-reco-color-scheme') || 'auto';
        const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;

        if (userMode === 'dark' || (userMode === 'auto' && systemDarkMode)) {
          document.documentElement.classList.toggle('dark', true);
        }
      })();
    </script>
    <title>一篇讲透自研的前端错误监控 | hua</title><meta name="description" content="Just playing around">
    <link rel="modulepreload" href="/assets/app-ff2f634e.js"><link rel="modulepreload" href="/assets/yipianjiangtouziyandeqianduancuowujiankong.html-2310c492.js"><link rel="modulepreload" href="/assets/yipianjiangtouziyandeqianduancuowujiankong.html-1f0e2856.js"><link rel="prefetch" href="/assets/index.html-6d5e9dd3.js" as="script"><link rel="prefetch" href="/assets/index.html-8c2edf06.js" as="script"><link rel="prefetch" href="/assets/index.html-a2c706b5.js" as="script"><link rel="prefetch" href="/assets/index.html-3e569ae4.js" as="script"><link rel="prefetch" href="/assets/index.html-f82b0aa0.js" as="script"><link rel="prefetch" href="/assets/index.html-2c441a3a.js" as="script"><link rel="prefetch" href="/assets/index.html-90e126be.js" as="script"><link rel="prefetch" href="/assets/index.html-8f49f4fa.js" as="script"><link rel="prefetch" href="/assets/index.html-3b85be16.js" as="script"><link rel="prefetch" href="/assets/index.html-c033c470.js" as="script"><link rel="prefetch" href="/assets/index.html-c0fc96cd.js" as="script"><link rel="prefetch" href="/assets/index.html-1b635d8f.js" as="script"><link rel="prefetch" href="/assets/index.html-d8745ef2.js" as="script"><link rel="prefetch" href="/assets/index.html-c12aa8eb.js" as="script"><link rel="prefetch" href="/assets/index.html-e1662aca.js" as="script"><link rel="prefetch" href="/assets/index.html-c4d32c30.js" as="script"><link rel="prefetch" href="/assets/index.html-28bf635e.js" as="script"><link rel="prefetch" href="/assets/index.html-e145c4e3.js" as="script"><link rel="prefetch" href="/assets/index.html-f2d49c62.js" as="script"><link rel="prefetch" href="/assets/index.html-f9d6c749.js" as="script"><link rel="prefetch" href="/assets/index.html-cc46c7a4.js" as="script"><link rel="prefetch" href="/assets/index.html-4e5ab0a1.js" as="script"><link rel="prefetch" href="/assets/index.html-8f006b09.js" as="script"><link rel="prefetch" href="/assets/index.html-1b32e371.js" as="script"><link rel="prefetch" href="/assets/index.html-442695cd.js" as="script"><link rel="prefetch" href="/assets/index.html-cb8bff8a.js" as="script"><link rel="prefetch" href="/assets/index.html-f4c822ce.js" as="script"><link rel="prefetch" href="/assets/index.html-38c19992.js" as="script"><link rel="prefetch" href="/assets/index.html-938482ba.js" as="script"><link rel="prefetch" href="/assets/index.html-7cda2118.js" as="script"><link rel="prefetch" href="/assets/index.html-de602e3a.js" as="script"><link rel="prefetch" href="/assets/index.html-236e9745.js" as="script"><link rel="prefetch" href="/assets/index.html-6cf06f14.js" as="script"><link rel="prefetch" href="/assets/index.html-1a88d37b.js" as="script"><link rel="prefetch" href="/assets/index.html-c8e98ed0.js" as="script"><link rel="prefetch" href="/assets/index.html-800887e5.js" as="script"><link rel="prefetch" href="/assets/index.html-06f5ab5e.js" as="script"><link rel="prefetch" href="/assets/index.html-5d669565.js" as="script"><link rel="prefetch" href="/assets/index.html-cda0070c.js" as="script"><link rel="prefetch" href="/assets/index.html-fe378dda.js" as="script"><link rel="prefetch" href="/assets/index.html-dffdd74d.js" as="script"><link rel="prefetch" href="/assets/index.html-0f53ed8c.js" as="script"><link rel="prefetch" href="/assets/index.html-fce4e91d.js" as="script"><link rel="prefetch" href="/assets/index.html-47ef367f.js" as="script"><link rel="prefetch" href="/assets/index.html-5882abad.js" as="script"><link rel="prefetch" href="/assets/index.html-5ccbba59.js" as="script"><link rel="prefetch" href="/assets/index.html-357d85f9.js" as="script"><link rel="prefetch" href="/assets/index.html-949c2eb2.js" as="script"><link rel="prefetch" href="/assets/Goyuyanzhongyong os_exec zhixingminglingdewuzhongzishi.html-13b6970b.js" as="script"><link rel="prefetch" href="/assets/Goyuyandezhuyaotezheng.html-3406d548.js" as="script"><link rel="prefetch" href="/assets/gin middleware.html-85a32585.js" as="script"><link rel="prefetch" href="/assets/go modxiangguanmingling.html-927983b4.js" as="script"><link rel="prefetch" href="/assets/golangzhong，jsonhegorm tagdequzhi.html-226e8027.js" as="script"><link rel="prefetch" href="/assets/shuji.html-1eaea987.js" as="script"><link rel="prefetch" href="/assets/zhanweifu.html-bfc7030c.js" as="script"><link rel="prefetch" href="/assets/screen changyongmingling.html-610065c2.js" as="script"><link rel="prefetch" href="/assets/jiejuescreenzhuangtaiweiAttachedlianshangbudewenti.html-6005c71e.js" as="script"><link rel="prefetch" href="/assets/Flutter lianjiezhenshishoujishebeishiwufashiyonglocalhost.html-1ce5ecc3.js" as="script"><link rel="prefetch" href="/assets/Getx - ruheshiyongzhuangtaiguanlishuju_rxbool.html-96a48c05.js" as="script"><link rel="prefetch" href="/assets/Electronyingyongdedabaohezidonggengxin.html-378537f7.js" as="script"><link rel="prefetch" href="/assets/electronxiugaimorenanzhuangmulunsispeizhi.html-af176189.js" as="script"><link rel="prefetch" href="/assets/vite-electron-ts.html-30e295e0.js" as="script"><link rel="prefetch" href="/assets/webpack-electron-ts-basexiangmudajian.html-00c598e3.js" as="script"><link rel="prefetch" href="/assets/ruheshiyongpnpmdabaoelectronxiangmu.html-173f9289.js" as="script"><link rel="prefetch" href="/assets/CSS zhong position younaxiezhi.html-4b2f867f.js" as="script"><link rel="prefetch" href="/assets/CSS3xinzengliaonaxiexintexing？.html-d2c186c5.js" as="script"><link rel="prefetch" href="/assets/CSSzhiDisplay、VisibilityheOpactitydequbie.html-05e3d551.js" as="script"><link rel="prefetch" href="/assets/CSSzhishengbeibujuyushuangfeiyibuju.html-e4604b37.js" as="script"><link rel="prefetch" href="/assets/CSSxuanzeqiyounaxie.html-f149f341.js" as="script"><link rel="prefetch" href="/assets/css3xintexing.html-e83aae2a.js" as="script"><link rel="prefetch" href="/assets/divjizhongfangfa.html-e696681a.js" as="script"><link rel="prefetch" href="/assets/scssbadatexing.html-b75daa85.js" as="script"><link rel="prefetch" href="/assets/shimeshiBFC ？ruhechuangjian BFC ？BFC youshimeyong.html-066d22aa.js" as="script"><link rel="prefetch" href="/assets/jieshaoyixia CSS dehezimoxing.html-089f7d16.js" as="script"><link rel="prefetch" href="/assets/guanyuoffsetTopdelijie.html-5765c56c.js" as="script"><link rel="prefetch" href="/assets/qianduanxingnenyouhua-CSSxingnenyouhua.html-7b8d5e5e.js" as="script"><link rel="prefetch" href="/assets/shixianimgtupianbunenbeituodongdeliangzhongjiandanfangfa.html-5d42755d.js" as="script"><link rel="prefetch" href="/assets/Git push.html-6d6b243e.js" as="script"><link rel="prefetch" href="/assets/git LF CRLF.html-2c7f734e.js" as="script"><link rel="prefetch" href="/assets/git remote xiangguancaozuo.html-0c01bbe1.js" as="script"><link rel="prefetch" href="/assets/git stash.html-aa36e467.js" as="script"><link rel="prefetch" href="/assets/gitlabcangkushiyongforkmoshixiadetongbu.html-732c2dfe.js" as="script"><link rel="prefetch" href="/assets/gitqiehuandaozhidingyuanchengfenzhi.html-400f205f.js" as="script"><link rel="prefetch" href="/assets/gitxuexi.html-a9a2d8cd.js" as="script"><link rel="prefetch" href="/assets/gitcaozuoxuexi.html-1d499fc8.js" as="script"><link rel="prefetch" href="/assets/missing Change-Id in message footer.html-fe05b52d.js" as="script"><link rel="prefetch" href="/assets/daimatijiaofangshi.html-7b5a685f.js" as="script"><link rel="prefetch" href="/assets/daimatijiaowenti.html-a2e4b8ee.js" as="script"><link rel="prefetch" href="/assets/zijicaozuoguocheng.html-34056ba4.js" as="script"><link rel="prefetch" href="/assets/7cengmoxingheTCP_IP 4cengmoxing.html-87e587f3.js" as="script"><link rel="prefetch" href="/assets/HTTPSjiami（woshou）guocheng.html-dd3d539a.js" as="script"><link rel="prefetch" href="/assets/liulanqidehuancuncelue.html-85888eca.js" as="script"><link rel="prefetch" href="/assets/H5xintexingyounaxie？.html-bd37ece1.js" as="script"><link rel="prefetch" href="/assets/shimeshixiangyingshisheji？xiangyingshishejidejibenyuanlishishime？ruhezuo？.html-f1ff098d.js" as="script"><link rel="prefetch" href="/assets/qianduanxingnenyouhua - yongRAILmoxingfenxixingnen.html-f447766b.js" as="script"><link rel="prefetch" href="/assets/qianduanxingnenyouhua-baipingshijian.html-d3ce942e.js" as="script"><link rel="prefetch" href="/assets/wangzhantupianjiazaimanzenmeyouhua.html-6d92089f.js" as="script"><link rel="prefetch" href="/assets/shuoxianiduiDOMshudelijie.html-451c5c18.js" as="script"><link rel="prefetch" href="/assets/shuruURLdaoxianshiyemiandequanguocheng.html-3f406b0e.js" as="script"><link rel="prefetch" href="/assets/zhongpai(reflow)hezhonghui(repaint).html-ec33ede4.js" as="script"><link rel="prefetch" href="/assets/ES5ruheshixianjicheng（fumeizhongjichengfangshiyouquedian）.html-2a4a4fc5.js" as="script"><link rel="prefetch" href="/assets/IntersectionObserverlanjiazai.html-9fe1c1b8.js" as="script"><link rel="prefetch" href="/assets/JS weirenwuhehongrenwu.html-0c63e45f.js" as="script"><link rel="prefetch" href="/assets/JS-shuzusortfangfayongdeshinazhongpaixusuanfa.html-df9e8546.js" as="script"><link rel="prefetch" href="/assets/JSON.stringify()qushixianshenkaobeidekang.html-2f48f599.js" as="script"><link rel="prefetch" href="/assets/JSzhong0.1_0.2weishimebudengyu0.3.html-9b151455.js" as="script"><link rel="prefetch" href="/assets/JSzhongdetoString、Object.toString、Object.prototype.toSt.html-bd49be98.js" as="script"><link rel="prefetch" href="/assets/JSchangjiannacunxieloujijiejuefangan.html-660bfe49.js" as="script"><link rel="prefetch" href="/assets/JSshuzuzhonggaibianyuanshuzuhebugaibianyuanshuzudefangfa.html-4d31c48d.js" as="script"><link rel="prefetch" href="/assets/JavaScriptdeES6、ES7、ES8、ES9、ES10xintexing.html-b645d028.js" as="script"><link rel="prefetch" href="/assets/Object.defineProperty().html-c02cac9a.js" as="script"><link rel="prefetch" href="/assets/addEventListener() fangfa.html-d643d130.js" as="script"><link rel="prefetch" href="/assets/call()、apply()、bind()yongfahequbie.html-c8e73d5d.js" as="script"><link rel="prefetch" href="/assets/es6jiantouhanshu.html-4ec1c167.js" as="script"><link rel="prefetch" href="/assets/instanceof he typeof deshixianyuanli.html-d4b579e2.js" as="script"><link rel="prefetch" href="/assets/js shixiancallheapplyfangfa.html-3a167a59.js" as="script"><link rel="prefetch" href="/assets/jsdenewcaozuofudaodizuoliaoshime.html-be175f14.js" as="script"><link rel="prefetch" href="/assets/useStateheuseRefdequbie.html-ee67a224.js" as="script"><link rel="prefetch" href="/assets/shimeshiAsync await，hePromiseyoushimequbie.html-de814bdf.js" as="script"><link rel="prefetch" href="/assets/shimeshihongrenwu、weirenwu？hongrenwu、weirenwuyounaxie？youshizenmezhixingde？.html-2dbc47f7.js" as="script"><link rel="prefetch" href="/assets/congyuanxingdaoyuanxinglian.html-61737a69.js" as="script"><link rel="prefetch" href="/assets/congruheshiyongdaoruheshixianyigePromise.html-d320a259.js" as="script"><link rel="prefetch" href="/assets/nizhidaodeqianduanxingnenyouhuashouduanyounaxie.html-afb5bf38.js" as="script"><link rel="prefetch" href="/assets/hanshukelihua.html-f12e7ae5.js" as="script"><link rel="prefetch" href="/assets/hanshukelihua：sanxingdaimashixian add(1)(2)(3).html-4dce2a94.js" as="script"><link rel="prefetch" href="/assets/qianduanmokuaihuaguifanxiangxizongjie.html-0471a497.js" as="script"><link rel="prefetch" href="/assets/qianduankuayemiantongxin.html-f6c3e78d.js" as="script"><link rel="prefetch" href="/assets/qianduanluyouhashhehistorydequbie.html-7004fe7b.js" as="script"><link rel="prefetch" href="/assets/qianduanluyoudeliangzhongmoshi：hashmoshihe historymoshi.html-75453684.js" as="script"><link rel="prefetch" href="/assets/ruhexiechuyigejingyanmianshiguandeshenkaobei.html-71282041.js" as="script"><link rel="prefetch" href="/assets/qianxitupianlanjiazai(sanzhongshixianfangfayuliangzhongyouhuafangshi).html-b30bd31d.js" as="script"><link rel="prefetch" href="/assets/qiantanObject.prototype.toString.call(obj)gongnenjiyuanli.html-10b756f8.js" as="script"><link rel="prefetch" href="/assets/jichengdeduozhongfangshiheyouquedian.html-f9c60432.js" as="script"><link rel="prefetch" href="/assets/shuoxia generator yuanli.html-9f5e2672.js" as="script"><link rel="prefetch" href="/assets/shuoxiashijianmoxing.html-e2063be9.js" as="script"><link rel="prefetch" href="/assets/bibaodeshixianyuanlihezuoyong、yijinacunxielu.html-08e28650.js" as="script"><link rel="prefetch" href="/assets/fangdouhejieliudelijie，jiqiyingyongchangjing.html-b4cf837b.js" as="script"><link rel="prefetch" href="/assets/xcode-selecthexcodedequbie.html-a13c021f.js" as="script"><link rel="prefetch" href="/assets/shiyongkuaijiejiandakaidangqianmuluiTerm_.html-94de624a.js" as="script"><link rel="prefetch" href="/assets/shezhizitiyanse.html-8fae2b67.js" as="script"><link rel="prefetch" href="/assets/VSCode launch.jsonpeizhixiangjie.html-d29b16d8.js" as="script"><link rel="prefetch" href="/assets/panellumpeizhixiang.html-a1d787e6.js" as="script"><link rel="prefetch" href="/assets/canshujiedu.html-28d9c2f2.js" as="script"><link rel="prefetch" href="/assets/React React _ TypeScript moren Props dechuli.html-5771bd55.js" as="script"><link rel="prefetch" href="/assets/React guanyusetStatetongbuhuoyibuwentidelijie.html-0246289d.js" as="script"><link rel="prefetch" href="/assets/React，youyadebuhuoyichang.html-393038a0.js" as="script"><link rel="prefetch" href="/assets/plugin_react_jsx-runtimezuoyong.html-b918fa6f.js" as="script"><link rel="prefetch" href="/assets/sandayuanze · Redux.html-553c7866.js" as="script"><link rel="prefetch" href="/assets/jiyu Next.js de SSR_SSG fanganliaojieyixia.html-d8d4aa01.js" as="script"><link rel="prefetch" href="/assets/tansuo React hechengshijian.html-7bf14202.js" as="script"><link rel="prefetch" href="/assets/jiandanlijiegaojiezujian.html-1da1d519.js" as="script"><link rel="prefetch" href="/assets/dudongReactyuanlizhidiaoheyuFiber.html-f7e2b9a1.js" as="script"><link rel="prefetch" href="/assets/(38tiaoxiaoxi) Macosanzhuangredisjirediskeshihuaguanligongju_macanzhuangrediskeshihuagongju_.html-b2ae05d1.js" as="script"><link rel="prefetch" href="/assets/tsconfig.jsonpeizhixiangjie.html-85113c6b.js" as="script"><link rel="prefetch" href="/assets/xiangjieTypeScriptxiangmuzhongdetsconfig.jsonpeizhi.html-0760b7d8.js" as="script"><link rel="prefetch" href="/assets/VS Codezidingyidaimayanse.html-45a670ef.js" as="script"><link rel="prefetch" href="/assets/VUEshengmingzhouqihanfuzizujianshengmingzhouqijianjie.html-8631aba9.js" as="script"><link rel="prefetch" href="/assets/zuizhibaideVue3jiaocheng，5fenzhongjiukanwanliao.html-423adb46.js" as="script"><link rel="prefetch" href="/assets/Webpack V5 _ React jiaoshoujiadepeizhi.html-277c02e4.js" as="script"><link rel="prefetch" href="/assets/webpackpeizhiwenjiancaiyongts.html-a7b53d3e.js" as="script"><link rel="prefetch" href="/assets/xitongfuwuguanli.html-a49eb1d3.js" as="script"><link rel="prefetch" href="/assets/Chrome DevTools Performance gongnenxiangjie.html-7d3fa6b2.js" as="script"><link rel="prefetch" href="/assets/PNPMshezhiquanjubaodeanzhuanglujing.html-ba2af033.js" as="script"><link rel="prefetch" href="/assets/lerna huaishi pnpm _ changesets.html-aed8f3a8.js" as="script"><link rel="prefetch" href="/assets/moduleResolution zongjie.html-413290b1.js" as="script"><link rel="prefetch" href="/assets/nrmdeshiyong（anzhuang、peizhi、chakan、qiehuan、zengjia、shanchu、ceshi.html-e6ff88b9.js" as="script"><link rel="prefetch" href="/assets/package.json scripts.html-5e4f90f0.js" as="script"><link rel="prefetch" href="/assets/pnpm link.html-b708048f.js" as="script"><link rel="prefetch" href="/assets/pnpm workspacedechangyongmingling.html-85e97bd6.js" as="script"><link rel="prefetch" href="/assets/pnpm yarn npmqubie.html-02296a4e.js" as="script"><link rel="prefetch" href="/assets/pnpmmorenshiyongnpmrchuaishipnpmrc.html-822b3c3f.js" as="script"><link rel="prefetch" href="/assets/qianduangongchenghua.html-1d294605.js" as="script"><link rel="prefetch" href="/assets/qianduanceshizhiJestshenruqianchu.html-87a80d8d.js" as="script"><link rel="prefetch" href="/assets/jiyu Node.js deqingliangjisiyoucangku Verdaccio.html-23f6f480.js" as="script"><link rel="prefetch" href="/assets/shixianyigedabaoshijiangCSSzhurudaoJSdeVitechajian.html-b80a6038.js" as="script"><link rel="prefetch" href="/assets/liulanqiPerformancemianbanxingnenjiankongxiangjie.html-90386c65.js" as="script"><link rel="prefetch" href="/assets/qianduanxingnenjiankonghecuowushoujiyushangbao.html-b7c00679.js" as="script"><link rel="prefetch" href="/assets/cuowuchuli.html-246a9bcb.js" as="script"><link rel="prefetch" href="/assets/cuowubuhuo.html-959dcd8a.js" as="script"><link rel="prefetch" href="/assets/qianduanxingnenyouhua(21zhongyouhua_7zhongdingweifangshi).html-440ca208.js" as="script"><link rel="prefetch" href="/assets/api.html-abf9ecbe.js" as="script"><link rel="prefetch" href="/assets/home.html-e8c20f42.js" as="script"><link rel="prefetch" href="/assets/plugin.html-a6786cc3.js" as="script"><link rel="prefetch" href="/assets/theme.html-d99ac584.js" as="script"><link rel="prefetch" href="/assets/declare module __.module.less_ _.html-227fd2d1.js" as="script"><link rel="prefetch" href="/assets/eslint-configheeslint-plugindequbie.html-25ffb980.js" as="script"><link rel="prefetch" href="/assets/eslint-plugin-jsx-a11y.html-afa6d026.js" as="script"><link rel="prefetch" href="/assets/eslintpeizhiairbnb-base.html-aefb5467.js" as="script"><link rel="prefetch" href="/assets/eslintpeizhiairbnb.html-80bd86fe.js" as="script"><link rel="prefetch" href="/assets/husky lint-stagedpeizhi.html-cdf0e725.js" as="script"><link rel="prefetch" href="/assets/husky yu lint-stagedanzhuangyupeizhi.html-39b8a2d4.js" as="script"><link rel="prefetch" href="/assets/husky wuxiao？ xinbanben husky zenmepeizhi.html-bbd96a0e.js" as="script"><link rel="prefetch" href="/assets/huskyshengchenghook.html-8cabfdba.js" as="script"><link rel="prefetch" href="/assets/404.html-60b35caa.js" as="script"><link rel="prefetch" href="/assets/index.html-0eb57c05.js" as="script"><link rel="prefetch" href="/assets/index.html-fcc2de39.js" as="script"><link rel="prefetch" href="/assets/index.html-c9d12803.js" as="script"><link rel="prefetch" href="/assets/index.html-4f3895aa.js" as="script"><link rel="prefetch" href="/assets/index.html-954634b2.js" as="script"><link rel="prefetch" href="/assets/index.html-c953de85.js" as="script"><link rel="prefetch" href="/assets/index.html-45492d39.js" as="script"><link rel="prefetch" href="/assets/index.html-07523c58.js" as="script"><link rel="prefetch" href="/assets/index.html-497320f0.js" as="script"><link rel="prefetch" href="/assets/index.html-a8bfab31.js" as="script"><link rel="prefetch" href="/assets/index.html-1d6505c7.js" as="script"><link rel="prefetch" href="/assets/index.html-919085ec.js" as="script"><link rel="prefetch" href="/assets/index.html-176bd9e5.js" as="script"><link rel="prefetch" href="/assets/index.html-2ae368bd.js" as="script"><link rel="prefetch" href="/assets/index.html-398d8fcd.js" as="script"><link rel="prefetch" href="/assets/index.html-69c72fd3.js" as="script"><link rel="prefetch" href="/assets/index.html-5385678f.js" as="script"><link rel="prefetch" href="/assets/index.html-9c2be541.js" as="script"><link rel="prefetch" href="/assets/index.html-9d61bbeb.js" as="script"><link rel="prefetch" href="/assets/index.html-8d3f3115.js" as="script"><link rel="prefetch" href="/assets/index.html-21d842d7.js" as="script"><link rel="prefetch" href="/assets/index.html-8751bce4.js" as="script"><link rel="prefetch" href="/assets/index.html-93fa3040.js" as="script"><link rel="prefetch" href="/assets/index.html-b61dc227.js" as="script"><link rel="prefetch" href="/assets/index.html-7bca5433.js" as="script"><link rel="prefetch" href="/assets/index.html-2b78d7ec.js" as="script"><link rel="prefetch" href="/assets/index.html-dc943abe.js" as="script"><link rel="prefetch" href="/assets/index.html-19119f45.js" as="script"><link rel="prefetch" href="/assets/index.html-078b3e4f.js" as="script"><link rel="prefetch" href="/assets/index.html-86a2acff.js" as="script"><link rel="prefetch" href="/assets/index.html-dcb88343.js" as="script"><link rel="prefetch" href="/assets/index.html-b1a7469f.js" as="script"><link rel="prefetch" href="/assets/index.html-0f566c55.js" as="script"><link rel="prefetch" href="/assets/index.html-ea2dd5f8.js" as="script"><link rel="prefetch" href="/assets/index.html-b5cd24c8.js" as="script"><link rel="prefetch" href="/assets/index.html-12dadddb.js" as="script"><link rel="prefetch" href="/assets/index.html-ad6cc116.js" as="script"><link rel="prefetch" href="/assets/index.html-4b612477.js" as="script"><link rel="prefetch" href="/assets/index.html-5eaa2ec5.js" as="script"><link rel="prefetch" href="/assets/index.html-49510982.js" as="script"><link rel="prefetch" href="/assets/index.html-070932f8.js" as="script"><link rel="prefetch" href="/assets/index.html-7ec06c96.js" as="script"><link rel="prefetch" href="/assets/index.html-4d2e13e7.js" as="script"><link rel="prefetch" href="/assets/index.html-0f268687.js" as="script"><link rel="prefetch" href="/assets/index.html-785f2a1f.js" as="script"><link rel="prefetch" href="/assets/index.html-b1015a3a.js" as="script"><link rel="prefetch" href="/assets/index.html-64dcaa6c.js" as="script"><link rel="prefetch" href="/assets/index.html-afce4b24.js" as="script"><link rel="prefetch" href="/assets/Goyuyanzhongyong os_exec zhixingminglingdewuzhongzishi.html-74876d44.js" as="script"><link rel="prefetch" href="/assets/Goyuyandezhuyaotezheng.html-f78bdb8d.js" as="script"><link rel="prefetch" href="/assets/gin middleware.html-e1910403.js" as="script"><link rel="prefetch" href="/assets/go modxiangguanmingling.html-408e0767.js" as="script"><link rel="prefetch" href="/assets/golangzhong，jsonhegorm tagdequzhi.html-542fe77d.js" as="script"><link rel="prefetch" href="/assets/shuji.html-62b8fea5.js" as="script"><link rel="prefetch" href="/assets/zhanweifu.html-b7bc7c7e.js" as="script"><link rel="prefetch" href="/assets/screen changyongmingling.html-a7a7d3ae.js" as="script"><link rel="prefetch" href="/assets/jiejuescreenzhuangtaiweiAttachedlianshangbudewenti.html-8a2244a5.js" as="script"><link rel="prefetch" href="/assets/Flutter lianjiezhenshishoujishebeishiwufashiyonglocalhost.html-7d331ced.js" as="script"><link rel="prefetch" href="/assets/Getx - ruheshiyongzhuangtaiguanlishuju_rxbool.html-6544bbac.js" as="script"><link rel="prefetch" href="/assets/Electronyingyongdedabaohezidonggengxin.html-6ba2aafd.js" as="script"><link rel="prefetch" href="/assets/electronxiugaimorenanzhuangmulunsispeizhi.html-46004078.js" as="script"><link rel="prefetch" href="/assets/vite-electron-ts.html-6ef13a2a.js" as="script"><link rel="prefetch" href="/assets/webpack-electron-ts-basexiangmudajian.html-13f6b822.js" as="script"><link rel="prefetch" href="/assets/ruheshiyongpnpmdabaoelectronxiangmu.html-dd999dee.js" as="script"><link rel="prefetch" href="/assets/CSS zhong position younaxiezhi.html-d4c7dd54.js" as="script"><link rel="prefetch" href="/assets/CSS3xinzengliaonaxiexintexing？.html-2e684a99.js" as="script"><link rel="prefetch" href="/assets/CSSzhiDisplay、VisibilityheOpactitydequbie.html-4962aa18.js" as="script"><link rel="prefetch" href="/assets/CSSzhishengbeibujuyushuangfeiyibuju.html-f534a657.js" as="script"><link rel="prefetch" href="/assets/CSSxuanzeqiyounaxie.html-3a18af66.js" as="script"><link rel="prefetch" href="/assets/css3xintexing.html-7e354910.js" as="script"><link rel="prefetch" href="/assets/divjizhongfangfa.html-99313ed3.js" as="script"><link rel="prefetch" href="/assets/scssbadatexing.html-a8a047e4.js" as="script"><link rel="prefetch" href="/assets/shimeshiBFC ？ruhechuangjian BFC ？BFC youshimeyong.html-1a3a4906.js" as="script"><link rel="prefetch" href="/assets/jieshaoyixia CSS dehezimoxing.html-739aeac2.js" as="script"><link rel="prefetch" href="/assets/guanyuoffsetTopdelijie.html-1e37d247.js" as="script"><link rel="prefetch" href="/assets/qianduanxingnenyouhua-CSSxingnenyouhua.html-540d99ca.js" as="script"><link rel="prefetch" href="/assets/shixianimgtupianbunenbeituodongdeliangzhongjiandanfangfa.html-45872467.js" as="script"><link rel="prefetch" href="/assets/Git push.html-f9b9f3bb.js" as="script"><link rel="prefetch" href="/assets/git LF CRLF.html-c9de8ef8.js" as="script"><link rel="prefetch" href="/assets/git remote xiangguancaozuo.html-7d0cd2fc.js" as="script"><link rel="prefetch" href="/assets/git stash.html-f177dea8.js" as="script"><link rel="prefetch" href="/assets/gitlabcangkushiyongforkmoshixiadetongbu.html-73297292.js" as="script"><link rel="prefetch" href="/assets/gitqiehuandaozhidingyuanchengfenzhi.html-e4e89dee.js" as="script"><link rel="prefetch" href="/assets/gitxuexi.html-d25d970f.js" as="script"><link rel="prefetch" href="/assets/gitcaozuoxuexi.html-9ebd54b9.js" as="script"><link rel="prefetch" href="/assets/missing Change-Id in message footer.html-b2bca5b7.js" as="script"><link rel="prefetch" href="/assets/daimatijiaofangshi.html-fcbe00de.js" as="script"><link rel="prefetch" href="/assets/daimatijiaowenti.html-a5805922.js" as="script"><link rel="prefetch" href="/assets/zijicaozuoguocheng.html-8f30f4e4.js" as="script"><link rel="prefetch" href="/assets/7cengmoxingheTCP_IP 4cengmoxing.html-1dddcb2a.js" as="script"><link rel="prefetch" href="/assets/HTTPSjiami（woshou）guocheng.html-0da2ab3f.js" as="script"><link rel="prefetch" href="/assets/liulanqidehuancuncelue.html-35216ffc.js" as="script"><link rel="prefetch" href="/assets/H5xintexingyounaxie？.html-3cb7ff8d.js" as="script"><link rel="prefetch" href="/assets/shimeshixiangyingshisheji？xiangyingshishejidejibenyuanlishishime？ruhezuo？.html-31e31e5a.js" as="script"><link rel="prefetch" href="/assets/qianduanxingnenyouhua - yongRAILmoxingfenxixingnen.html-555487ba.js" as="script"><link rel="prefetch" href="/assets/qianduanxingnenyouhua-baipingshijian.html-d250afc0.js" as="script"><link rel="prefetch" href="/assets/wangzhantupianjiazaimanzenmeyouhua.html-106f1bf0.js" as="script"><link rel="prefetch" href="/assets/shuoxianiduiDOMshudelijie.html-9db4b394.js" as="script"><link rel="prefetch" href="/assets/shuruURLdaoxianshiyemiandequanguocheng.html-80f4f82e.js" as="script"><link rel="prefetch" href="/assets/zhongpai(reflow)hezhonghui(repaint).html-043e5bff.js" as="script"><link rel="prefetch" href="/assets/ES5ruheshixianjicheng（fumeizhongjichengfangshiyouquedian）.html-8f130d28.js" as="script"><link rel="prefetch" href="/assets/IntersectionObserverlanjiazai.html-b29608f2.js" as="script"><link rel="prefetch" href="/assets/JS weirenwuhehongrenwu.html-d7f6e461.js" as="script"><link rel="prefetch" href="/assets/JS-shuzusortfangfayongdeshinazhongpaixusuanfa.html-dc1f2ff2.js" as="script"><link rel="prefetch" href="/assets/JSON.stringify()qushixianshenkaobeidekang.html-c94073ed.js" as="script"><link rel="prefetch" href="/assets/JSzhong0.1_0.2weishimebudengyu0.3.html-00efd544.js" as="script"><link rel="prefetch" href="/assets/JSzhongdetoString、Object.toString、Object.prototype.toSt.html-f455908c.js" as="script"><link rel="prefetch" href="/assets/JSchangjiannacunxieloujijiejuefangan.html-68afd2d9.js" as="script"><link rel="prefetch" href="/assets/JSshuzuzhonggaibianyuanshuzuhebugaibianyuanshuzudefangfa.html-35b66084.js" as="script"><link rel="prefetch" href="/assets/JavaScriptdeES6、ES7、ES8、ES9、ES10xintexing.html-c4673a4e.js" as="script"><link rel="prefetch" href="/assets/Object.defineProperty().html-1fb7855a.js" as="script"><link rel="prefetch" href="/assets/addEventListener() fangfa.html-b4e9ca4e.js" as="script"><link rel="prefetch" href="/assets/call()、apply()、bind()yongfahequbie.html-f15b2bc8.js" as="script"><link rel="prefetch" href="/assets/es6jiantouhanshu.html-d412c1ee.js" as="script"><link rel="prefetch" href="/assets/instanceof he typeof deshixianyuanli.html-85973777.js" as="script"><link rel="prefetch" href="/assets/js shixiancallheapplyfangfa.html-36ee0cce.js" as="script"><link rel="prefetch" href="/assets/jsdenewcaozuofudaodizuoliaoshime.html-88ac504f.js" as="script"><link rel="prefetch" href="/assets/useStateheuseRefdequbie.html-f9acf85a.js" as="script"><link rel="prefetch" href="/assets/shimeshiAsync await，hePromiseyoushimequbie.html-22d1595e.js" as="script"><link rel="prefetch" href="/assets/shimeshihongrenwu、weirenwu？hongrenwu、weirenwuyounaxie？youshizenmezhixingde？.html-2e241ff1.js" as="script"><link rel="prefetch" href="/assets/congyuanxingdaoyuanxinglian.html-f4ce1dc0.js" as="script"><link rel="prefetch" href="/assets/congruheshiyongdaoruheshixianyigePromise.html-6c73eca3.js" as="script"><link rel="prefetch" href="/assets/nizhidaodeqianduanxingnenyouhuashouduanyounaxie.html-a4fdb248.js" as="script"><link rel="prefetch" href="/assets/hanshukelihua.html-17155378.js" as="script"><link rel="prefetch" href="/assets/hanshukelihua：sanxingdaimashixian add(1)(2)(3).html-088a7b36.js" as="script"><link rel="prefetch" href="/assets/qianduanmokuaihuaguifanxiangxizongjie.html-8ae859f1.js" as="script"><link rel="prefetch" href="/assets/qianduankuayemiantongxin.html-7f6f0beb.js" as="script"><link rel="prefetch" href="/assets/qianduanluyouhashhehistorydequbie.html-03d582ff.js" as="script"><link rel="prefetch" href="/assets/qianduanluyoudeliangzhongmoshi：hashmoshihe historymoshi.html-6e243fcc.js" as="script"><link rel="prefetch" href="/assets/ruhexiechuyigejingyanmianshiguandeshenkaobei.html-84f925da.js" as="script"><link rel="prefetch" href="/assets/qianxitupianlanjiazai(sanzhongshixianfangfayuliangzhongyouhuafangshi).html-86041904.js" as="script"><link rel="prefetch" href="/assets/qiantanObject.prototype.toString.call(obj)gongnenjiyuanli.html-ec8e8035.js" as="script"><link rel="prefetch" href="/assets/jichengdeduozhongfangshiheyouquedian.html-656c2b9c.js" as="script"><link rel="prefetch" href="/assets/shuoxia generator yuanli.html-caf9119f.js" as="script"><link rel="prefetch" href="/assets/shuoxiashijianmoxing.html-d21cf510.js" as="script"><link rel="prefetch" href="/assets/bibaodeshixianyuanlihezuoyong、yijinacunxielu.html-c73a1fc1.js" as="script"><link rel="prefetch" href="/assets/fangdouhejieliudelijie，jiqiyingyongchangjing.html-880b388e.js" as="script"><link rel="prefetch" href="/assets/xcode-selecthexcodedequbie.html-cf627cb0.js" as="script"><link rel="prefetch" href="/assets/shiyongkuaijiejiandakaidangqianmuluiTerm_.html-9a6e0766.js" as="script"><link rel="prefetch" href="/assets/shezhizitiyanse.html-d6bb523a.js" as="script"><link rel="prefetch" href="/assets/VSCode launch.jsonpeizhixiangjie.html-206bb127.js" as="script"><link rel="prefetch" href="/assets/panellumpeizhixiang.html-602e4c7c.js" as="script"><link rel="prefetch" href="/assets/canshujiedu.html-c3ebdc6c.js" as="script"><link rel="prefetch" href="/assets/React React _ TypeScript moren Props dechuli.html-4546fe9a.js" as="script"><link rel="prefetch" href="/assets/React guanyusetStatetongbuhuoyibuwentidelijie.html-83082fb0.js" as="script"><link rel="prefetch" href="/assets/React，youyadebuhuoyichang.html-2d889a35.js" as="script"><link rel="prefetch" href="/assets/plugin_react_jsx-runtimezuoyong.html-958b993a.js" as="script"><link rel="prefetch" href="/assets/sandayuanze · Redux.html-0d3c30b7.js" as="script"><link rel="prefetch" href="/assets/jiyu Next.js de SSR_SSG fanganliaojieyixia.html-71f638d7.js" as="script"><link rel="prefetch" href="/assets/tansuo React hechengshijian.html-3b083941.js" as="script"><link rel="prefetch" href="/assets/jiandanlijiegaojiezujian.html-98bdba6a.js" as="script"><link rel="prefetch" href="/assets/dudongReactyuanlizhidiaoheyuFiber.html-ebefb6c7.js" as="script"><link rel="prefetch" href="/assets/(38tiaoxiaoxi) Macosanzhuangredisjirediskeshihuaguanligongju_macanzhuangrediskeshihuagongju_.html-268bc308.js" as="script"><link rel="prefetch" href="/assets/tsconfig.jsonpeizhixiangjie.html-0ddd9c57.js" as="script"><link rel="prefetch" href="/assets/xiangjieTypeScriptxiangmuzhongdetsconfig.jsonpeizhi.html-514b7f7c.js" as="script"><link rel="prefetch" href="/assets/VS Codezidingyidaimayanse.html-30165cee.js" as="script"><link rel="prefetch" href="/assets/VUEshengmingzhouqihanfuzizujianshengmingzhouqijianjie.html-6cfdfe6c.js" as="script"><link rel="prefetch" href="/assets/zuizhibaideVue3jiaocheng，5fenzhongjiukanwanliao.html-6fe978e0.js" as="script"><link rel="prefetch" href="/assets/Webpack V5 _ React jiaoshoujiadepeizhi.html-e704a413.js" as="script"><link rel="prefetch" href="/assets/webpackpeizhiwenjiancaiyongts.html-2e8f8567.js" as="script"><link rel="prefetch" href="/assets/xitongfuwuguanli.html-3d884468.js" as="script"><link rel="prefetch" href="/assets/Chrome DevTools Performance gongnenxiangjie.html-1ab6b1d6.js" as="script"><link rel="prefetch" href="/assets/PNPMshezhiquanjubaodeanzhuanglujing.html-60f543bf.js" as="script"><link rel="prefetch" href="/assets/lerna huaishi pnpm _ changesets.html-7bb92d3d.js" as="script"><link rel="prefetch" href="/assets/moduleResolution zongjie.html-5c4d0d4a.js" as="script"><link rel="prefetch" href="/assets/nrmdeshiyong（anzhuang、peizhi、chakan、qiehuan、zengjia、shanchu、ceshi.html-0d514a3d.js" as="script"><link rel="prefetch" href="/assets/package.json scripts.html-6483a6ab.js" as="script"><link rel="prefetch" href="/assets/pnpm link.html-ee9c0093.js" as="script"><link rel="prefetch" href="/assets/pnpm workspacedechangyongmingling.html-170068f4.js" as="script"><link rel="prefetch" href="/assets/pnpm yarn npmqubie.html-f3085807.js" as="script"><link rel="prefetch" href="/assets/pnpmmorenshiyongnpmrchuaishipnpmrc.html-cf2f4c7d.js" as="script"><link rel="prefetch" href="/assets/qianduangongchenghua.html-f2219a97.js" as="script"><link rel="prefetch" href="/assets/qianduanceshizhiJestshenruqianchu.html-23378eaa.js" as="script"><link rel="prefetch" href="/assets/jiyu Node.js deqingliangjisiyoucangku Verdaccio.html-fc9991fe.js" as="script"><link rel="prefetch" href="/assets/shixianyigedabaoshijiangCSSzhurudaoJSdeVitechajian.html-e2eeb888.js" as="script"><link rel="prefetch" href="/assets/liulanqiPerformancemianbanxingnenjiankongxiangjie.html-c8e6a6aa.js" as="script"><link rel="prefetch" href="/assets/qianduanxingnenjiankonghecuowushoujiyushangbao.html-e74ae7c7.js" as="script"><link rel="prefetch" href="/assets/cuowuchuli.html-fffcd368.js" as="script"><link rel="prefetch" href="/assets/cuowubuhuo.html-7d36890b.js" as="script"><link rel="prefetch" href="/assets/qianduanxingnenyouhua(21zhongyouhua_7zhongdingweifangshi).html-eb9b20c8.js" as="script"><link rel="prefetch" href="/assets/api.html-0039559d.js" as="script"><link rel="prefetch" href="/assets/home.html-9a1333ec.js" as="script"><link rel="prefetch" href="/assets/plugin.html-be368a68.js" as="script"><link rel="prefetch" href="/assets/theme.html-2e38eec4.js" as="script"><link rel="prefetch" href="/assets/declare module __.module.less_ _.html-fc1d7dd0.js" as="script"><link rel="prefetch" href="/assets/eslint-configheeslint-plugindequbie.html-1d8c6485.js" as="script"><link rel="prefetch" href="/assets/eslint-plugin-jsx-a11y.html-1f67f698.js" as="script"><link rel="prefetch" href="/assets/eslintpeizhiairbnb-base.html-fb0a14f4.js" as="script"><link rel="prefetch" href="/assets/eslintpeizhiairbnb.html-0f07b4de.js" as="script"><link rel="prefetch" href="/assets/husky lint-stagedpeizhi.html-1806f006.js" as="script"><link rel="prefetch" href="/assets/husky yu lint-stagedanzhuangyupeizhi.html-14c9ff89.js" as="script"><link rel="prefetch" href="/assets/husky wuxiao？ xinbanben husky zenmepeizhi.html-8440a8b7.js" as="script"><link rel="prefetch" href="/assets/huskyshengchenghook.html-6a3beb56.js" as="script"><link rel="prefetch" href="/assets/404.html-e3535ff8.js" as="script"><link rel="prefetch" href="/assets/reco-valine-994c873b.js" as="script"><link rel="prefetch" href="/assets/giscus-a53917f0-fbc3188d.js" as="script">
    <link rel="preload" href="/assets/style-f4c0886e.css" as="style"><link rel="stylesheet" href="/assets/style-f4c0886e.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><div class="common-wrapper series--no show-catalog"><div><header class="navbar-container" style="top:0;"><div class="site-brand nav-item"><img class="logo" src="/logo.png" alt="hua"><a href="/" class="site-name can-hide">hua</a></div><div class="nav-item navbar-links-wrapper" style=""><div><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div><nav class="navbar-links"><!--[--><div class="navbar-links__item"><a href="/" class="link router-link-active" aria-label="主页"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->主页<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="工具推荐"><span class="xicon-container left title"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->工具推荐<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="工具推荐"><span class="title"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->工具推荐<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a class="link" href="https://codesandbox.io" target="_blank" rel="noopener noreferrer" aria-label="CodeSandbox"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->CodeSandbox<!--]--></span></span><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a class="link" href="https://www.notion.so" target="_blank" rel="noopener noreferrer" aria-label="Notion"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Notion<!--]--></span></span><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a class="link" href="https://tool.oschina.net/uploads/apidocs/jquery/regexp.html" target="_blank" rel="noopener noreferrer" aria-label="正则表达式手册"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->正则表达式手册<!--]--></span></span><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a class="link" href="https://mp.weixin.qq.com/s?__biz=Mzg2NjUxOTM2Mg==&amp;mid=2247496638&amp;idx=1&amp;sn=58924ba4e3663d1977e1443e8a44f483&amp;chksm=ce4b2393f93caa854e99191df6f9fdbc2729394f20a0fcea64a5edb0286a436b77ce1499ad5a&amp;mpshare=1&amp;scene=1&amp;srcid=0903dW38wDHlspuQbcXCbaX4&amp;sharer_sharetime=1662172410774&amp;sharer_shareid=d5ee4c6a5d0532faba5b96fc8308b250&amp;version=4.0.9.99149&amp;platform=mac#rd" target="_blank" rel="noopener noreferrer" aria-label="React Api"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->React Api<!--]--></span></span><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><span class="xicon-container btn-toggle-dark-mode btn--dark-mode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M15 2h2v3h-2z" fill="currentColor"></path><path d="M27 15h3v2h-3z" fill="currentColor"></path><path d="M15 27h2v3h-2z" fill="currentColor"></path><path d="M2 15h3v2H2z" fill="currentColor"></path><path d="M5.45 6.884l1.414-1.415l2.121 2.122l-1.414 1.414z" fill="currentColor"></path><path d="M23 7.58l2.121-2.12l1.414 1.414l-2.121 2.121z" fill="currentColor"></path><path d="M23.002 24.416l1.415-1.414l2.12 2.122l-1.413 1.414z" fill="currentColor"></path><path d="M5.47 25.13L7.59 23L9 24.42l-2.12 2.12l-1.41-1.41z" fill="currentColor"></path><path d="M16 8a8 8 0 1 0 8 8a8 8 0 0 0-8-8zm0 14a6 6 0 0 1 0-12z" fill="currentColor"></path></svg></span><span class="xicon-container btn-toggle-menus"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:inherit;"><circle cx="16" cy="8" r="2" fill="currentColor"></circle><circle cx="16" cy="16" r="2" fill="currentColor"></circle><circle cx="16" cy="24" r="2" fill="currentColor"></circle></svg></span></div></header><!----><div class="mobile-menus-container"><nav class="navbar-links mobile"><!--[--><div class="navbar-links__item"><a href="/" class="link router-link-active" aria-label="主页"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->主页<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="工具推荐"><span class="xicon-container left title"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->工具推荐<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="工具推荐"><span class="title"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->工具推荐<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a class="link" href="https://codesandbox.io" target="_blank" rel="noopener noreferrer" aria-label="CodeSandbox"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->CodeSandbox<!--]--></span></span><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a class="link" href="https://www.notion.so" target="_blank" rel="noopener noreferrer" aria-label="Notion"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Notion<!--]--></span></span><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a class="link" href="https://tool.oschina.net/uploads/apidocs/jquery/regexp.html" target="_blank" rel="noopener noreferrer" aria-label="正则表达式手册"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->正则表达式手册<!--]--></span></span><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a class="link" href="https://mp.weixin.qq.com/s?__biz=Mzg2NjUxOTM2Mg==&amp;mid=2247496638&amp;idx=1&amp;sn=58924ba4e3663d1977e1443e8a44f483&amp;chksm=ce4b2393f93caa854e99191df6f9fdbc2729394f20a0fcea64a5edb0286a436b77ce1499ad5a&amp;mpshare=1&amp;scene=1&amp;srcid=0903dW38wDHlspuQbcXCbaX4&amp;sharer_sharetime=1662172410774&amp;sharer_shareid=d5ee4c6a5d0532faba5b96fc8308b250&amp;version=4.0.9.99149&amp;platform=mac#rd" target="_blank" rel="noopener noreferrer" aria-label="React Api"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->React Api<!--]--></span></span><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><div class="appearance"><span>Appearance</span><span class="xicon-container btn-toggle-dark-mode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M15 2h2v3h-2z" fill="currentColor"></path><path d="M27 15h3v2h-3z" fill="currentColor"></path><path d="M15 27h2v3h-2z" fill="currentColor"></path><path d="M2 15h3v2H2z" fill="currentColor"></path><path d="M5.45 6.884l1.414-1.415l2.121 2.122l-1.414 1.414z" fill="currentColor"></path><path d="M23 7.58l2.121-2.12l1.414 1.414l-2.121 2.121z" fill="currentColor"></path><path d="M23.002 24.416l1.415-1.414l2.12 2.122l-1.413 1.414z" fill="currentColor"></path><path d="M5.47 25.13L7.59 23L9 24.42l-2.12 2.12l-1.41-1.41z" fill="currentColor"></path><path d="M16 8a8 8 0 1 0 8 8a8 8 0 0 0-8-8zm0 14a6 6 0 0 1 0-12z" fill="currentColor"></path></svg></span></div></div><div class="series-mask"></div><aside class="series-container"><div class="site-brand"><img class="logo" src="/logo.png" alt="hua"><a href="/" class="site-name can-hide">hua</a></div><!--[--><!--]--></aside><!--[--><main class="page-container"><h1 class="page-title">一篇讲透自研的前端错误监控</h1><div class="page-info"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M16 4a5 5 0 1 1-5 5a5 5 0 0 1 5-5m0-2a7 7 0 1 0 7 7a7 7 0 0 0-7-7z" fill="currentColor"></path><path d="M26 30h-2v-5a5 5 0 0 0-5-5h-6a5 5 0 0 0-5 5v5H6v-5a7 7 0 0 1 7-7h6a7 7 0 0 1 7 7z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->hua<!--]--></span></span><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M26 4h-4V2h-2v2h-8V2h-2v2H6c-1.1 0-2 .9-2 2v20c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 22H6V12h20v14zm0-16H6V6h4v2h2V6h8v2h2V6h4v4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2022-10-25<!--]--></span></span><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M11.17 6l3.42 3.41l.58.59H28v16H4V6h7.17m0-2H4a2 2 0 0 0-2 2v20a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2H16l-3.41-3.41A2 2 0 0 0 11.17 4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->前端监控<!--]--></span></span><!----><!----></div><div class="theme-reco-default-content"><div><h1 id="○-二、产品设计" tabindex="-1"><a class="header-anchor" href="#○-二、产品设计" aria-hidden="true">#</a> ○ 二、产品设计</h1><blockquote><p>我们要什么样的一个产品呢，根据第一性原理，解决关键问题“怎么定位问题”。 通过5W1H法我们来分析，我们想要知道些什么信息呢？</p></blockquote><h2 id="错误信息" tabindex="-1"><a class="header-anchor" href="#错误信息" aria-hidden="true">#</a> 错误信息</h2><p>其实错误监控说简单就一句话可以描述，搜集页面错误，进行上报，然后对症分析。</p><p>按照5W1H法则进行分析这句话，可以发现有几项需要我们关注。</p><ol><li>What，发⽣了什么错误：逻辑错误、数据错误、⽹络错误、语法错误等。</li><li>When，出现的时间段，如时间戳。</li><li>Who，影响了多少用户，包括报错事件数、IP、设备信息。</li><li>Where，出现的页面是哪些，包括页面、广告位（我司）、媒体（我司）。</li><li>Why，错误的原因是为什么，包括错误堆栈、⾏列、SourceMap。</li><li>How，怎么定位解决问题，我们还需要收集系统等信息。</li></ol><h2 id="架构层次" tabindex="-1"><a class="header-anchor" href="#架构层次" aria-hidden="true">#</a> 架构层次</h2><blockquote><p>首先我们需要梳理下，我们需要一些哪些功能。</p></blockquote><p>那我们怎么得到上面的信息进行最终错误的定位呢。</p><p>首先我们肯定需要对错误进行搜集，然后用户设备页面端的错误我们怎么才能感知到呢，这就需要进行上报。那么第一层就展现出来了，我们需要一个搜集上报端。</p><p>那怎么才能进行上报呢，和后端协作那么久，肯定知道的吧🙃 ，你需要一个接口。那就需要一个服务器来进行对于上报的错误进行采集，对于错误进行筛选聚合。那么第二层也知道了啊，我们需要一个采集聚合端。</p><p>我们搜集到了我们足够的物料信息了，那接下来要怎么用起来呢，我们需要把它们按照我们的规则进行整理。如果每次又是通过写类SQL进行整理查询效率会很低，因此我们需要一个可视化的平台进行展示。因此有了第三层，可视化分析端。</p><p>感觉好像做完啦，想必大家都这么想，一个错误监控平台做完了，🙅 。如果是这样你会发现一个现象，每次上线和上线后一段时间，开发同学都一直盯着屏幕看，这是在干嘛，人形眼动观察者模式吗。因此我们需要通过代码去解决，自然而然，第四层，监控告警端应运而生。</p><p>所以请大声说出来我们需要什么🙈 ，搜集上报端，采集聚合端，可视分析端，监控告警端。</p><h1 id="○-三、系统设计" tabindex="-1"><a class="header-anchor" href="#○-三、系统设计" aria-hidden="true">#</a> ○ 三、系统设计</h1><blockquote><p>如函数一样，定义好每个环节的输入和输出，且核心需要处理的功能。</p></blockquote><p>下面我们看看上述所说的四个端怎么去实现呢。</p><h2 id="搜集上报端-sdk" tabindex="-1"><a class="header-anchor" href="#搜集上报端-sdk" aria-hidden="true">#</a> 搜集上报端（SDK）</h2><blockquote><p>这个环节主要输入是所有错误，输出是捕获上报错误。核心是处理不同类型错误的搜集工作。其他是一些非核心但必要的工作。</p></blockquote><h3 id="错误类型" tabindex="-1"><a class="header-anchor" href="#错误类型" aria-hidden="true">#</a> 错误类型</h3><p>先看看我们需要处理哪些错误类型。</p><p><strong>常见JS执行错误</strong></p><ol><li>SyntaxError</li></ol><blockquote><p>解析时发生语法错误</p></blockquote><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>// 控制台运行
const xx,
复制代码
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>window.onerror捕获不到SyntxError，一般SyntaxError在构建阶段，甚至本地开发阶段就会被发现。</p><ol start="2"><li>TypeError</li></ol><blockquote><p>值不是所期待的类型</p></blockquote><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>// 控制台运行
const person = void 0
person.name
复制代码
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>ReferenceError</li></ol><blockquote><p>引用未声明的变量</p></blockquote><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>// 控制台运行
nodefined
复制代码
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>RangeError</li></ol><blockquote><p>当一个值不在其所允许的范围或者集合中</p></blockquote><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>(function fn ( ) { fn() })()
复制代码
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>网络错误</strong></p><ol><li>ResourceError</li></ol><blockquote><p>资源加载错误</p></blockquote><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>new Image().src = &#39;/remote/image/notdeinfed.png&#39;
复制代码
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>HttpError</li></ol><blockquote><p>Http请求错误</p></blockquote><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>// 控制台运行
fetch(&#39;/remote/notdefined&#39;, {})
复制代码
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="搜集错误" tabindex="-1"><a class="header-anchor" href="#搜集错误" aria-hidden="true">#</a> 搜集错误</h3><p>所有起因来源于错误，那我们如何进行错误捕获。</p><p><strong>try/catch</strong></p><blockquote><p>能捕获常规运行时错误，语法错误和异步错误不行</p></blockquote><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>// 常规运行时错误，可以捕获 ✅
try {
  console.log(notdefined);
} catch(e) {
  console.log(&#39;捕获到异常：&#39;, e);
}

// 语法错误，不能捕获 ❌
try {
  const notdefined,
} catch(e) {
  console.log(&#39;捕获到异常：&#39;, e);
}

// 异步错误，不能捕获 ❌
try {
  setTimeout(() =&gt; {
    console.log(notdefined);
  }, 0)
} catch(e) {
  console.log(&#39;捕获到异常：&#39;,e);
}
复制代码
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>try/catch有它细致处理的优势，但缺点也比较明显。</p><p><strong>window.onerror</strong></p><blockquote><p>pure js错误收集，window.onerror，当 JS 运行时错误发生时，window 会触发一个 ErrorEvent 接口的 error 事件。</p></blockquote><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>/**
* @param {String}  message    错误信息
* @param {String}  source    出错文件
* @param {Number}  lineno    行号
* @param {Number}  colno    列号
* @param {Object}  error  Error对象
*/

window.onerror = function(message, source, lineno, colno, error) {
   console.log(&#39;捕获到异常：&#39;, {message, source, lineno, colno, error});
}
复制代码
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>先验证下几个错误是否可以捕获。 ​</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>// 常规运行时错误，可以捕获 ✅

window.onerror = function(message, source, lineno, colno, error) {
  console.log(&#39;捕获到异常：&#39;,{message, source, lineno, colno, error});
}
console.log(notdefined);

// 语法错误，不能捕获 ❌
window.onerror = function(message, source, lineno, colno, error) {
  console.log(&#39;捕获到异常：&#39;,{message, source, lineno, colno, error});
}
const notdefined,
      
// 异步错误，可以捕获 ✅
window.onerror = function(message, source, lineno, colno, error) {
  console.log(&#39;捕获到异常：&#39;,{message, source, lineno, colno, error});
}
setTimeout(() =&gt; {
  console.log(notdefined);
}, 0)

// 资源错误，不能捕获 ❌
&lt;script&gt;
  window.onerror = function(message, source, lineno, colno, error) {
  console.log(&#39;捕获到异常：&#39;,{message, source, lineno, colno, error});
  return true;
}
&lt;/script&gt;
&lt;img src=&quot;https://yun.tuia.cn/image/kkk.png&quot;&gt; 复制代码
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>window.onerror 不能捕获资源错误怎么办？ ​</p><p><strong>window.addEventListener</strong></p><blockquote><p>当一项资源（如图片或脚本）加载失败，加载资源的元素会触发一个 Event 接口的 error 事件，这些 error 事件不会向上冒泡到 window，但能被捕获。而window.onerror不能监测捕获。</p></blockquote><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>// 图片、script、css加载错误，都能被捕获 ✅
&lt;script&gt; window.addEventListener(&#39;error&#39;, (error) =&gt; {
     console.log(&#39;捕获到异常：&#39;, error);
  }, true) &lt;/script&gt;
&lt;img src=&quot;https://yun.tuia.cn/image/kkk.png&quot;&gt;
&lt;script src=&quot;https://yun.tuia.cn/foundnull.js&quot;&gt;&lt;/script&gt;
&lt;link href=&quot;https://yun.tuia.cn/foundnull.css&quot; rel=&quot;stylesheet&quot;/&gt;
  
// new Image错误，不能捕获 ❌
&lt;script&gt; window.addEventListener(&#39;error&#39;, (error) =&gt; {
    console.log(&#39;捕获到异常：&#39;, error);
  }, true) &lt;/script&gt;
&lt;script&gt; new Image().src = &#39;https://yun.tuia.cn/image/lll.png&#39; &lt;/script&gt;

// fetch错误，不能捕获 ❌
&lt;script&gt; window.addEventListener(&#39;error&#39;, (error) =&gt; {
    console.log(&#39;捕获到异常：&#39;, error);
  }, true) &lt;/script&gt;
&lt;script&gt; fetch(&#39;https://tuia.cn/test&#39;) &lt;/script&gt;
复制代码
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>new Image运用的比较少，可以单独自己处理自己的错误。 ​</p><p>但通用的fetch怎么办呢，fetch返回Promise，但Promise的错误不能被捕获，怎么办呢？ ​</p><p><strong>Promise错误</strong></p><ol><li>普通Promise错误</li></ol><blockquote><p>try/catch不能捕获Promise中的错误</p></blockquote><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>// try/catch 不能处理 JSON.parse 的错误，因为它在 Promise 中
try {
  new Promise((resolve,reject) =&gt; { 
    JSON.parse(&#39;&#39;)
    resolve();
  })
} catch(err) {
  console.error(&#39;in try catch&#39;, err)
}

// 需要使用catch方法
new Promise((resolve,reject) =&gt; { 
  JSON.parse(&#39;&#39;)
  resolve();
}).catch(err =&gt; {
  console.log(&#39;in catch fn&#39;, err)
})
复制代码
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>async错误</li></ol><blockquote><p>try/catch不能捕获async包裹的错误</p></blockquote><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>const getJSON = async () =&gt; {
  throw new Error(&#39;inner error&#39;)
}

// 通过try/catch处理
const makeRequest = async () =&gt; {
    try {
        // 捕获不到
        JSON.parse(getJSON());
    } catch (err) {
        console.log(&#39;outer&#39;, err);
    }
};

try {
    // try/catch不到
    makeRequest()
} catch(err) {
    console.error(&#39;in try catch&#39;, err)
}

try {
    // 需要await，才能捕获到
    await makeRequest()
} catch(err) {
    console.error(&#39;in try catch&#39;, err)
}
复制代码
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>import chunk错误</li></ol><blockquote><p>import其实返回的也是一个promise，因此使用如下两种方式捕获错误</p></blockquote><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>// Promise catch方法
import(/* webpackChunkName: &quot;incentive&quot; */&#39;./index&#39;).then(module =&gt; {
    module.default()
}).catch((err) =&gt; {
    console.error(&#39;in catch fn&#39;, err)
})

// await 方法，try catch
try {
    const module = await import(/* webpackChunkName: &quot;incentive&quot; */&#39;./index&#39;);
    module.default()
} catch(err) {
    console.error(&#39;in try catch&#39;, err)
}
复制代码
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>小结：全局捕获Promise中的错误</p><p>以上三种其实归结为Promise类型错误，可以通过unhandledrejection捕获</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>// 全局统一处理Promise
window.addEventListener(&quot;unhandledrejection&quot;, function(e){
  console.log(&#39;捕获到异常：&#39;, e);
});
fetch(&#39;https://tuia.cn/test&#39;)
复制代码
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>为了防止有漏掉的 Promise 异常，可通过unhandledrejection用来全局监听Uncaught Promise Error。 ​</p><p><strong>Vue错误</strong></p><blockquote><p>由于Vue会捕获所有Vue单文件组件或者Vue.extend继承的代码，所以在Vue里面出现的错误，并不会直接被window.onerror捕获，而是会抛给Vue.config.errorHandler。</p></blockquote><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>/**
 * 全局捕获Vue错误，直接扔出给onerror处理
 */
Vue.config.errorHandler = function (err) {
  setTimeout(() =&gt; {
    throw err
  })
}
复制代码
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>React错误</strong></p><blockquote><p>react 通过componentDidCatch，声明一个错误边界的组件</p></blockquote><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>class ErrorBoundary extends React.Component {
  constructor(props) {
    super(props);
    this.state = { hasError: false };
  }

  static getDerivedStateFromError(error) {
    // 更新 state 使下一次渲染能够显示降级后的 UI
    return { hasError: true };
  }

  componentDidCatch(error, errorInfo) {
    // 你同样可以将错误日志上报给服务器
    logErrorToMyService(error, errorInfo);
  }

  render() {
    if (this.state.hasError) {
      // 你可以自定义降级后的 UI 并渲染
      return &lt;h1&gt;Something went wrong.&lt;/h1&gt;;
    }

    return this.props.children; 
  }
}

class App extends React.Component {
   
  render() {
    return (
    &lt;ErrorBoundary&gt;
      &lt;MyWidget /&gt;
    &lt;/ErrorBoundary&gt;  
    )
  }
}
复制代码
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>但error boundaries并不会捕捉以下错误：React事件处理，异步代码，error boundaries自己抛出的错误。</p><h3 id="跨域问题" tabindex="-1"><a class="header-anchor" href="#跨域问题" aria-hidden="true">#</a> 跨域问题</h3><blockquote><p>一般情况，如果出现 Script error 这样的错误，基本上可以确定是出现了跨域问题。</p></blockquote><p>如果当前投放页面和云端JS所在不同域名，如果云端JS出现错误，window.onerror会出现Script Error。通过以下两种方法能给予解决。</p><ul><li>后端配置Access-Control-Allow-Origin、前端script加crossorigin。</li></ul><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>&lt;script src=&quot;http://yun.tuia.cn/test.js&quot; crossorigin&gt;&lt;/script&gt;

const script = document.createElement(&#39;script&#39;);
script.crossOrigin = &#39;anonymous&#39;;
script.src = &#39;http://yun.tuia.cn/test.js&#39;;
document.body.appendChild(script);
复制代码
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>如果不能修改服务端的请求头，可以考虑通过使用 try/catch 绕过，将错误抛出。</li></ul><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>&lt;!doctype html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;Test page in http://test.com&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;script src=&quot;https://yun.dui88.com/tuia/cdn/remote/testerror.js&quot;&gt;&lt;/script&gt;
  &lt;script&gt; window.onerror = function (message, url, line, column, error) {
    console.log(message, url, line, column, error);
  }

  try {
    foo(); // 调用testerror.js中定义的foo方法
  } catch (e) {
    throw e;
  } &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
复制代码
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>会发现如果不加try catch，console.log就会打印script error。加上try catch就能捕获到。 ​</p><p>我们捋一下场景，一般调用远端js，有下列三种常见情况。</p><ul><li>调用远端JS的方法出错</li><li>远端JS内部的事件出问题</li><li>要么在setTimeout等回调内出错</li></ul><p><strong>调用方法场景</strong></p><p>可以通过封装一个函数，能装饰原方法，使得其能被try/catch。</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code> &lt;!doctype html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;Test page in http://test.com&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;script src=&quot;https://yun.dui88.com/tuia/cdn/remote/testerror.js&quot;&gt;&lt;/script&gt;
  &lt;script&gt; window.onerror = function (message, url, line, column, error) {
    console.log(message, url, line, column, error);
  }

  function wrapErrors(fn) {
    // don&#39;t wrap function more than once
    if (!fn.__wrapped__) {
      fn.__wrapped__ = function () {
        try {
          return fn.apply(this, arguments);
        } catch (e) {
          throw e; // re-throw the error
        }
      };
    }

    return fn.__wrapped__;
  }

  wrapErrors(foo)() &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;

复制代码
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>大家可以尝试去掉wrapErrors感受下。 ​</p><p><strong>事件场景</strong> ​</p><p>可以劫持原生方法。</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code> &lt;!doctype html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;Test page in http://test.com&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;script&gt; const originAddEventListener = EventTarget.prototype.addEventListener;
    EventTarget.prototype.addEventListener = function (type, listener, options) {
      const wrappedListener = function (...args) {
        try {
          return listener.apply(this, args);
        }
        catch (err) {
          throw err;
        }
      }
      return originAddEventListener.call(this, type, wrappedListener, options);
    } &lt;/script&gt;
  &lt;div style=&quot;height: 9999px;&quot;&gt;http://test.com&lt;/div&gt;
  &lt;script src=&quot;https://yun.dui88.com/tuia/cdn/remote/error_scroll.js&quot;&gt;&lt;/script&gt;
  &lt;script&gt; window.onerror = function (message, url, line, column, error) {
    console.log(message, url, line, column, error);
  } &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
复制代码
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>大家可以尝试去掉封装EventTarget.prototype.addEventListener的那段代码，感受下。</p><h3 id="上报接口" tabindex="-1"><a class="header-anchor" href="#上报接口" aria-hidden="true">#</a> 上报接口</h3><p>为什么不能直接用GET/POST/HEAD请求接口进行上报？ ​</p><p>这个比较容易想到原因。一般而言，打点域名都不是当前域名，所以所有的接口请求都会构成跨域。 ​</p><p>为什么不能用请求其他的文件资源（js/css/ttf）的方式进行上报？ ​</p><p>创建资源节点后只有将对象注入到浏览器DOM树后，浏览器才会实际发送资源请求。而且载入js/css资源还会阻塞页面渲染，影响用户体验。 ​</p><p>构造图片打点不仅不用插入DOM，只要在js中new出Image对象就能发起请求，而且还没有阻塞问题，在没有js的浏览器环境中也能通过img标签正常打点。</p><p>使用new Image进行接口上报。最后一个问题，同样都是图片，上报时选用了1x1的透明GIF，而不是其他的PNG/JEPG/BMP文件。 ​</p><p>首先，1x1像素是最小的合法图片。而且，因为是通过图片打点，所以图片最好是透明的，这样一来不会影响页面本身展示效果，二者表示图片透明只要使用一个二进制位标记图片是透明色即可，不用存储色彩空间数据，可以节约体积。因为需要透明色，所以可以直接排除JEPG。 ​</p><p>同样的响应，GIF可以比BMP节约41%的流量，比PNG节约35%的流量。GIF才是最佳选择。</p><ul><li>可以进行跨域</li><li>不会携带cookie</li><li>不需要等待服务器返回数据</li></ul><blockquote><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fg.yuque.com%2Fzaotalk%2Fposts%2Fmxx4cb%23QUH0x" title="https://g.yuque.com/zaotalk/posts/mxx4cb#QUH0x" target="_blank" rel="noopener noreferrer">使用1*1的gif<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></blockquote><h3 id="非阻塞加载" tabindex="-1"><a class="header-anchor" href="#非阻塞加载" aria-hidden="true">#</a> 非阻塞加载</h3><p>尽量避免SDK的js资源加载影响。</p><p>通过先把window.onerror的错误记录进行缓存，然后异步进行SDK的加载，再在SDK里面处理错误上报。</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;script&gt; (function(w) {
            w._error_storage_ = [];
            function errorhandler(){
                // 用于记录当前的错误 
                w._error_storage_&amp;&amp;w._error_storage_.push([].slice.call(arguments));
            } 
            w.addEventListener &amp;&amp; w.addEventListener(&quot;error&quot;, errorhandler, true);
            var times = 3,
            appendScript = function appendScript() {
                var sc = document.createElement(&quot;script&quot;);
                sc.async = !0,
                sc.src = &#39;./build/skyeye.js&#39;,  // 取决于你存放的位置
                sc.crossOrigin = &quot;anonymous&quot;,
                sc.onerror = function() {
                    times--,
                    times &gt; 0 &amp;&amp; setTimeout(appendScript, 1500)
                },
                document.head &amp;&amp; document.head.appendChild(sc);
            };
            setTimeout(appendScript, 1500);
        })(window); &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;这是一个测试页面(new)&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;
复制代码
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="采集聚合端-日志服务器" tabindex="-1"><a class="header-anchor" href="#采集聚合端-日志服务器" aria-hidden="true">#</a> 采集聚合端（日志服务器）</h2><blockquote><p>这个环节，输入是借口接收到的错误记录，输出是有效的数据入库。核心功能需要对数据进行清洗，顺带解决了过多的服务压力。另一个核心功能是对数据进行入库。</p></blockquote><p>总体流程可以看为错误标识 -&gt; 错误过滤 -&gt; 错误接收 -&gt; 错误存储。</p><h3 id="错误标识-sdk配合" tabindex="-1"><a class="header-anchor" href="#错误标识-sdk配合" aria-hidden="true">#</a> 错误标识（SDK配合）</h3><p>聚合之前，我们需要有不同维度标识错误的能力，可以理解为定位单个错误条目，单个错误事件的能力。 ​</p><p><strong>单个错误条目</strong> <strong>​</strong></p><p>通过date和随机值生成一条对应的错误条目id。</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>const errorKey = `${+new Date()}@${randomString(8)}`

function randomString(len) {　　
    len = len || 32;
    let chars = &#39;ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678&#39;;
    let maxPos = chars.length;
    let pwd = &#39;&#39;;　　
    for (let i = 0; i &lt; len; i++) {　　　　
        pwd += chars.charAt(Math.floor(Math.random() * maxPos));　　
    }　　
    return pwd;
}
复制代码
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>单个错误事件</strong></p><p>首先需要有定位同个错误事件（不同用户，发生相同错误类型、错误信息）的能力。</p><p>通过message、colno与lineno进行相加计算阿斯克码值，可以生成错误的errorKey。</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>const eventKey = compressString(String(e.message), String(e.colno) + String(e.lineno))

function compressString(str, key) {
    let chars = &#39;ABCDEFGHJKMNPQRSTWXYZ&#39;;
    if (!str || !key) {
        return &#39;null&#39;;
    }
    let n = 0,
        m = 0;
    for (let i = 0; i &lt; str.length; i++) {
        n += str[i].charCodeAt();
    }
    for (let j = 0; j &lt; key.length; j++) {
        m += key[j].charCodeAt();
    }
    let num = n + &#39;&#39; + key[key.length - 1].charCodeAt() + m + str[str.length - 1].charCodeAt();
    if(num) {
        num = num + chars[num[num.length - 1]];
    }
    return num;
}
复制代码
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如下图，一个错误事件（事件列表），下属每条即为实际的错误条目。 <img width="756" height="422" src="/assets/8d3f4a2bc5c745c09a05fa0368bed0bf_eb2fe2871aed466f9-e62f2a5a.webp"></p><h3 id="错误过滤-sdk配合" tabindex="-1"><a class="header-anchor" href="#错误过滤-sdk配合" aria-hidden="true">#</a> 错误过滤（SDK配合）</h3><p><strong>域名过滤</strong> <strong>​</strong></p><p>过滤本页面script error，可能被webview插入其他js。 <strong>​</strong></p><p>我们只关心自己的远端JS问题，因此做了根据本公司域名进行过滤。</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>// 伪代码
if(!e.filename || !e.filename.match(/^(http|https):\/\/yun./)) return true
复制代码
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>重复上报</strong> ​</p><p>怎么避免重复的数据上报？根据errorKey来进行缓存，重复的错误避免上报的次数超过阈值。</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>// 伪代码

const localStorage = window.localStorage;
const TIMES = 6; // 缓存条数

export function setItem(key, repeat) {
    if(!key) {
        key = &#39;unknow&#39;;
    }
  
    if (has(key)) {
        const value = getItem(key);
        
      	// 核心代码，超过条数，跳出
        if (value &gt;= repeat) {
            return true;
        }
        storeStorage[key] = {
            value: value + 1,
            time: Date.now()
        }
    } else {
        storeStorage[key] = {
            value: 1,
            time: Date.now()
        }
    }
    return false;
}
复制代码
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="错误接收" tabindex="-1"><a class="header-anchor" href="#错误接收" aria-hidden="true">#</a> 错误接收</h3><p>在处理接收接口的时候，注意流量的控制，这也是后端开发需要投入最多精力的地方，处理高并发的流量。</p><p><strong>错误记录</strong></p><p>接收端使用Koa，简单的实现了接收及打印到磁盘。</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>// 伪代码

module.exports = async ctx =&gt; {
  const { query } = ctx.request;
  
 	// 对于字段进行简单check 
  check([ &#39;mobile&#39;, &#39;network&#39;, &#39;ip&#39;, &#39;system&#39;, &#39;ua&#39;, ......], query);

  ctx.type = &#39;application/json&#39;;
  ctx.body = { code: &#39;1&#39;, msg: &#39;数据上报成功&#39; };

  // 进行日志记录到磁盘的代码，根据自己的日志库选择
};
复制代码
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>削峰机制</strong> ​</p><p>比如每秒设置2000的阈值，然后根据请求量减少上限，定时重置上限。</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>// 伪代码

// 1000ms
const TICK = 1000;
// 1秒上限为2000
const MAX_LIMIT = 2000;
// 每台服务器请求上限值
let maxLimit = MAX_LIMIT;

/**
 * 启动重置函数
 */
const task = () =&gt; {
  setTimeout(() =&gt; {
    maxLimit = MAX_LIMIT;
    task();
  }, TICK);
};
task();

const check = () =&gt; {
  if (maxLimit &lt;= 0) {
    throw new Error(&#39;超过上报次数&#39;);
  }
  maxLimit--;
  // 执行业务代码。。。
};
复制代码
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>采样处理</strong> <strong>​</strong></p><p>超过阈值，还可以进行采样收集。</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>// 只采集 20%
if(Math.random() &lt; 0.2) {
  collect(data)      // 记录错误信息
}
复制代码
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="错误存储" tabindex="-1"><a class="header-anchor" href="#错误存储" aria-hidden="true">#</a> 错误存储</h3><p>对于打印在了磁盘的日志，我们怎么样才能对于其进行聚合呢，这里得考虑使用存储方案。</p><p>一般选择了存储方案后，设置好配置，存储方案就可以通过磁盘定时周期性的获取数据。因此我们需要选择一款存储方案。</p><p>对于存储方案，我们对比了日常常见方案，阿里云日志服务 - Log Service（SLS）、ELK（Elastic、Logstash、Kibana）、Hadoop/Hive（将数据存储在 Hadoop，利用 Hive 进行查询） 类方案的对比。</p><p>从以下方面进行了对比，最终选择了Log Service，主要考虑为无需搭建，成本低，查询功能满足。</p><table><thead><tr><th>功能项</th><th>ELK 类系统</th><th>Hadoop + Hive</th><th>日志服务</th></tr></thead><tbody><tr><td>日志延时</td><td>1~60 秒</td><td>几分钟~数小时</td><td>实时</td></tr><tr><td>查询延时</td><td>小于 1 秒</td><td>分钟级</td><td>小于 1 秒</td></tr><tr><td>查询能力</td><td>好</td><td>好</td><td>好</td></tr><tr><td>扩展性</td><td>提前预备机器</td><td>提前预备机器</td><td>秒级 10 倍扩容</td></tr><tr><td>成本</td><td>较高</td><td>较低</td><td>很低</td></tr></tbody></table><blockquote><p>日志延时：日志产生后，多久可查询。 查询延时：单位时间扫描数据量。 查询能力：关键词查询、条件组合查询、模糊查询、数值比较、上下文查询。 扩展性：快速应对百倍流量上涨。 成本：每 GB 费用。</p></blockquote><p>具体API使用，可查看<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.aliyun.com%2Fproduct%2Fsls" title="https://www.aliyun.com/product/sls" target="_blank" rel="noopener noreferrer">日志服务<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>。</p><h2 id="可视分析端-可视化平台" tabindex="-1"><a class="header-anchor" href="#可视分析端-可视化平台" aria-hidden="true">#</a> 可视分析端（可视化平台）</h2><blockquote><p>这个环节，输入是借口接收到的错误记录，输出是有效的数据入库。核心功能需要对数据进行清洗，顺带解决了过多的服务压力。另一个核心功能是对数据进行入库。</p></blockquote><h3 id="主功能" tabindex="-1"><a class="header-anchor" href="#主功能" aria-hidden="true">#</a> 主功能</h3><blockquote><p>这部分主要是产品功能的合理设计，做到小而美，具体的怎么聚合，参考阿里云SLS就可以。</p></blockquote><ol><li>首页图表，可选1天、4小时、1小时等等，聚合错误数，根据1天切分24份来聚合。</li><li>首页列表，聚合选中时间内的数据，展示错误文件、错误key、事件数、错误类型、时间、错误信息。</li><li>错误详情，事件列表、基本信息、设备信息、设备占比图表（见上面事件列表的图）。</li></ol><p>​</p><img width="756" height="426" src="/assets/140df94c3dd7479796e8fff7340fe807_696a075ee7354b0a8-f097ded9.webp"><h3 id="排行榜" tabindex="-1"><a class="header-anchor" href="#排行榜" aria-hidden="true">#</a> 排行榜</h3><p>刚开始做了待处理错误列表、我的错误列表、已解决列表，错误与人没有绑定关系，过于依赖人为主动，需要每个人主动到平台上处理，效果不佳。 ​</p><p>后面通过错误作者排行榜，通过钉钉日报来提醒对应人员处理。紧急错误，通过实时告警来责任到人，后面告警会说。</p><p>具体原理：</p><ul><li>webpack打包通过git命令把作者和作者邮箱、时间打包在头部。</li><li>在可视化服务中，去请求对应的报错url匹配到对应作者，返回给展示端。</li></ul><img width="756" height="411" src="/assets/df8cacdfd8b04b3b8d71ce85a012e829_698604e763f64c969-68f1ab5f.webp"><h3 id="sourcemap" tabindex="-1"><a class="header-anchor" href="#sourcemap" aria-hidden="true">#</a> SourceMap</h3><p>利用webpack的hidden-source-map构建。与 source-map 相比少了末尾的注释，但 output 目录下的 index.js.map 没有少。线上环境避免source-map泄露。</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>webpackJsonp([1],[
  function(e,t,i){...},
  function(e,t,i){...},
  function(e,t,i){...},
  function(e,t,i){...},
  ...
])
// 这里没有生成source-map的链接地址
复制代码
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>根据报错文件的url，根据团队内部约定好的目录和规则，定位之前打包上传的sourceMap地址。</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>const sourcemapUrl = (&#39;xxxfolder/&#39; + url + &#39;xxxHash&#39; +&#39;.map&#39;)
复制代码
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>​</p><p>获取上报的line、column、source，利用第三方库sourceMap进行定位。</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>const sourceMap = require(&#39;source-map&#39;)

// 根据行数获取源文件行数
const getPosition = async(map, rolno, colno) =&gt; {
  const consumer = await new sourceMap.SourceMapConsumer(map)

  const position = consumer.originalPositionFor({
    line: rolno,
    column: colno
  })

  position.content = consumer.sourceContentFor(position.source)

  return position
}
复制代码
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img width="756" height="540" src="/assets/da3add0bd9f64aaab8510971cc02ec47_216a80d66cfb486b8-1738c78d.webp"> 感兴趣SourceMap原理的，可以继续深入，<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FBbvJ-OfcS7Sa-e0Zq6iF1w" title="https://mp.weixin.qq.com/s/BbvJ-OfcS7Sa-e0Zq6iF1w" target="_blank" rel="noopener noreferrer">SourceMap 与前端异常监控<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>。</p><h2 id="错误报警" tabindex="-1"><a class="header-anchor" href="#错误报警" aria-hidden="true">#</a> 错误报警</h2><h3 id="报警设置" tabindex="-1"><a class="header-anchor" href="#报警设置" aria-hidden="true">#</a> 报警设置</h3><ol><li>每条业务线设置自己的阈值、错误时间跨度，报警轮询间隔</li><li>通过钉钉hook报警到对应的群</li><li>通过日报形式报出错误作者排行榜</li></ol><img width="756" height="662" src="/assets/511b071c77af47798b2f15edabf943ee_a691e32bc3214f21b-eb03b6e5.webp"><h1 id="○-四、扩展" tabindex="-1"><a class="header-anchor" href="#○-四、扩展" aria-hidden="true">#</a> ○ 四、扩展</h1><h2 id="行为搜集" tabindex="-1"><a class="header-anchor" href="#行为搜集" aria-hidden="true">#</a> 行为搜集</h2><p>通过搜集用户的操作，可以明显发现错误为什么产生。 <img width="756" height="333" src="/assets/79cf0c15300b4a1eaf5df218baab1d6b_2fde08b48a4b4eb9a-3a1018f9.webp"></p><h3 id="分类" tabindex="-1"><a class="header-anchor" href="#分类" aria-hidden="true">#</a> 分类</h3><ul><li>UI行为： 点击、滚动、聚焦/失焦、长按</li><li>浏览器行为：请求、前进/后退、跳转、新开页面、关闭</li><li>控制台行为：log、warn、error</li></ul><h3 id="搜集方式" tabindex="-1"><a class="header-anchor" href="#搜集方式" aria-hidden="true">#</a> 搜集方式</h3><ol><li>点击行为</li></ol><p>使用addEventListener监听全局上的click事件，将事件和DOM元素名字收集。与错误信息一起上报。</p><ol start="2"><li>发送请求</li></ol><p>监听XMLHttpRequest的onreadystatechange回调函数</p><ol start="3"><li>页面跳转</li></ol><p>监听window.onpopstate，页面进行跳转时会触发。</p><ol start="4"><li>控制台行为</li></ol><p>重写console对象的info等方法。 ​</p><p>有兴趣可以参考<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.yuque.com%2Fzaotalk%2Fposts%2Fmxx4cb%23De5Se" title="https://www.yuque.com/zaotalk/posts/mxx4cb#De5Se" target="_blank" rel="noopener noreferrer">行为监控<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>。</p><h2 id="遇到的问题" tabindex="-1"><a class="header-anchor" href="#遇到的问题" aria-hidden="true">#</a> 遇到的问题</h2><blockquote><p>由于涉及到一些隐私，下述会做脱敏处理。</p></blockquote><h3 id="空日志问题" tabindex="-1"><a class="header-anchor" href="#空日志问题" aria-hidden="true">#</a> 空日志问题</h3><p>上线灰度运行后，我们发现SLS日志存在一些空日志😢 ，🦢，这是发生了啥？</p><p>首先我们回忆下这个链路上有哪些环节可能存在问题。</p><img width="756" height="104" src="data:image/webp;base64,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"><p>排查链路，SLS采集环节之前有磁盘日志收集，服务端接收，SDK上报，那我们依次排查。 ​</p><p><img width="756" height="272" src="/assets/a983b9d2805644ce93421d4e1b115123_815bd87b41724c0f9-39bab344.webp"> 往前一步，发现磁盘日志就已经存在空日志，那剩下就得看一下接收端、SDK端。</p><p>开始利用控制变量法，先在SDK端进行空判断，防止空日志上报。结果：发现无效😅。 ​</p><p>再继续对Node接收端处理，对接收到的数据进行判空，如果为空不进行日志打印，结果：依然无效😳。 ​</p><p>所以开始定位是不是日志打印本身出了什么问题？研究了下日志第三方日志库的API，进行了各种尝试，发现依旧没用，我脸黑了🌚。</p><p>什么情况，“遇事不决”看源码。排查下日志库源码存在什么问题。对于源码的主调用流程走了一遍，并没有发现什么问题，一头雾水🙃。 ​</p><p>整个代码逻辑很正常，这让我们开始怀疑难道是数据的问题，于是开始缩减上报的字段，最终定义为了一个字段。发现上线后没有问题了😢。 ​</p><p>难道是有些字段存储的数据过长导致的？但从代码逻辑、流程日志中并没有反应这个错误的可能性。 ​</p><p>因此我们利用二分法，二分地增加字段，最终定位到了某个字段。如果存在某个字段上报就会出现问题。这很出乎人的意料。 ​</p><p>我们再想了下链路，除了日志库，其他代码基本都是我们自己的逻辑，所以对日志库进行了排查，怀疑其对某个字段做了什么处理。 ​</p><p>于是通过搜索，定位到了日志库在仆从模式（可以了解下Node的主从模式）下会使用某个字段来表意，导致和我们上报的字段冲突，因此丢失了🤪。</p><h3 id="日志丢失问题" tabindex="-1"><a class="header-anchor" href="#日志丢失问题" aria-hidden="true">#</a> 日志丢失问题</h3><p>解决了上个问题，开心了，一股成就感涌上心头。但马上就被当头一棒，我发现我高兴的太早了🤮。</p><p>团队的某同学在本地测试的时候，由于玩的很开心，一直去刷新页面去上报当前页面的错误。但他发现本地上报的条数和实际日志服务里的条数对不上，日志服务里的少了很多。</p><p>由于之前自身刚毕业时候做过2年多后端开发，对于IO操作丢失数据还是有点敏感。直觉上就感觉可能是多进程方向的问题。怀疑是多进程导致的文件死锁问题。</p><p>那我们去掉多线程，通过单线程，我们去重复原先复现问题的步骤。发现没有遗漏🤭。</p><p>我们发现能进行配置Cluster（主从模式）的地方有两处，日志库和部署工具。</p><p>观察日志库默认使用的主从进程模式，而部署工具没有主从模式的概念，势必会导致写入IO的死锁问题，导致日志丢失。于是在想社区有没有可以有解决此问题的第三方支持。</p><p>然后通过谷歌搜索，很快就找到了对应的第三方库，它能提供主人进程和仆从进程之间的消息沟通。原理是主人进程负责所有消息写入log，而仆从进程通过消息传递给主人进程。</p><h1 id="○-五、推荐阅读及引用" tabindex="-1"><a class="header-anchor" href="#○-五、推荐阅读及引用" aria-hidden="true">#</a> ○ 五、推荐阅读及引用</h1><p>处理异常</p><blockquote><p><a href="https://link.juejin.cn?target=http%3A%2F%2Fjartto.wang%2F2018%2F11%2F20%2Fjs-exception-handling%2Findex.html" title="http://jartto.wang/2018/11/20/js-exception-handling/index.html" target="_blank" rel="noopener noreferrer">如何优雅处理前端异常？<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></blockquote><p>source-map</p><blockquote><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FBbvJ-OfcS7Sa-e0Zq6iF1w" title="https://mp.weixin.qq.com/s/BbvJ-OfcS7Sa-e0Zq6iF1w" target="_blank" rel="noopener noreferrer">SourceMap 与前端异常监控<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></blockquote><p>React错误</p><blockquote><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FfGI-8VrejWFf11cootopUQ%3F" title="https://mp.weixin.qq.com/s/fGI-8VrejWFf11cootopUQ?" target="_blank" rel="noopener noreferrer">React，优雅的捕获异常<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></blockquote><p>Script Error</p><blockquote><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.sentry.io%2F2016%2F01%2F04%2Fclient-javascript-reporting-window-onerror" title="https://blog.sentry.io/2016/01/04/client-javascript-reporting-window-onerror" target="_blank" rel="noopener noreferrer">Capture and report JavaScript errors with window.onerror | Product Blog • Sentry<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.sentry.io%2F2016%2F05%2F17%2Fwhat-is-script-error" title="https://blog.sentry.io/2016/05/17/what-is-script-error" target="_blank" rel="noopener noreferrer">What the heck is &quot;Script error&quot;? | Product Blog • Sentry<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></blockquote><p>整体</p><blockquote><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.yuque.com%2Fzaotalk%2Fposts%2Fmxx4cb" title="https://www.yuque.com/zaotalk/posts/mxx4cb" target="_blank" rel="noopener noreferrer">前端搞监控|Allan - 如何实现一套多端错误监控平台<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.fundebug.com%2F2019%2F07%2F06%2Fhow-to-monitor-javascript-error%2F" title="https://blog.fundebug.com/2019/07/06/how-to-monitor-javascript-error/" target="_blank" rel="noopener noreferrer">一步一步搭建前端监控系统：JS错误监控篇<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://juejin.cn/post/6844904054334685197" target="_blank" rel="noopener noreferrer">撸一个前端监控系统<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></blockquote><p>之前开放日自己演讲的</p><blockquote><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fyun.tuia.cn%2Ftuia%2Ffed%2Fopenday%2F%25E9%2594%2599%25E8%25AF%25AF%25E7%259B%2591%25E6%258E%25A7%25E5%25A4%25A9%25E7%259C%25BC%2520-%2520%25E7%25BB%2593%25E6%259D%259F%25E8%25A3%25B8%25E5%25A5%2594.pdf" title="https://yun.tuia.cn/tuia/fed/openday/%E9%94%99%E8%AF%AF%E7%9B%91%E6%8E%A7%E5%A4%A9%E7%9C%BC%20-%20%E7%BB%93%E6%9D%9F%E8%A3%B8%E5%A5%94.pdf" target="_blank" rel="noopener noreferrer">结束裸奔ppt<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></blockquote></div></div><footer class="page-meta"><!----><!----></footer><!----><!----></main><!--]--><div class="page-catalog-container"><h5 class="tip">ON THIS PAGE</h5><ul><!--[--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blogs/qianduanjiankong/yipianjiangtouziyandeqianduancuowujiankong.html#错误信息" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="错误信息"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->错误信息<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blogs/qianduanjiankong/yipianjiangtouziyandeqianduancuowujiankong.html#架构层次" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="架构层次"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->架构层次<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blogs/qianduanjiankong/yipianjiangtouziyandeqianduancuowujiankong.html#搜集上报端-sdk" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="搜集上报端（SDK）"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->搜集上报端（SDK）<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/qianduanjiankong/yipianjiangtouziyandeqianduancuowujiankong.html#错误类型" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="错误类型"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->错误类型<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/qianduanjiankong/yipianjiangtouziyandeqianduancuowujiankong.html#搜集错误" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="搜集错误"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->搜集错误<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/qianduanjiankong/yipianjiangtouziyandeqianduancuowujiankong.html#跨域问题" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="跨域问题"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->跨域问题<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/qianduanjiankong/yipianjiangtouziyandeqianduancuowujiankong.html#上报接口" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="上报接口"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->上报接口<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/qianduanjiankong/yipianjiangtouziyandeqianduancuowujiankong.html#非阻塞加载" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="非阻塞加载"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->非阻塞加载<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blogs/qianduanjiankong/yipianjiangtouziyandeqianduancuowujiankong.html#采集聚合端-日志服务器" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="采集聚合端（日志服务器）"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->采集聚合端（日志服务器）<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/qianduanjiankong/yipianjiangtouziyandeqianduancuowujiankong.html#错误标识-sdk配合" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="错误标识（SDK配合）"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->错误标识（SDK配合）<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/qianduanjiankong/yipianjiangtouziyandeqianduancuowujiankong.html#错误过滤-sdk配合" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="错误过滤（SDK配合）"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->错误过滤（SDK配合）<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/qianduanjiankong/yipianjiangtouziyandeqianduancuowujiankong.html#错误接收" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="错误接收"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->错误接收<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/qianduanjiankong/yipianjiangtouziyandeqianduancuowujiankong.html#错误存储" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="错误存储"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->错误存储<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blogs/qianduanjiankong/yipianjiangtouziyandeqianduancuowujiankong.html#可视分析端-可视化平台" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="可视分析端（可视化平台）"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->可视分析端（可视化平台）<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/qianduanjiankong/yipianjiangtouziyandeqianduancuowujiankong.html#主功能" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="主功能"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->主功能<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/qianduanjiankong/yipianjiangtouziyandeqianduancuowujiankong.html#排行榜" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="排行榜"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->排行榜<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/qianduanjiankong/yipianjiangtouziyandeqianduancuowujiankong.html#sourcemap" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="SourceMap"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->SourceMap<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blogs/qianduanjiankong/yipianjiangtouziyandeqianduancuowujiankong.html#错误报警" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="错误报警"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->错误报警<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/qianduanjiankong/yipianjiangtouziyandeqianduancuowujiankong.html#报警设置" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="报警设置"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->报警设置<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blogs/qianduanjiankong/yipianjiangtouziyandeqianduancuowujiankong.html#行为搜集" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="行为搜集"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->行为搜集<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/qianduanjiankong/yipianjiangtouziyandeqianduancuowujiankong.html#分类" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="分类"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->分类<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/qianduanjiankong/yipianjiangtouziyandeqianduancuowujiankong.html#搜集方式" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="搜集方式"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->搜集方式<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blogs/qianduanjiankong/yipianjiangtouziyandeqianduancuowujiankong.html#遇到的问题" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="遇到的问题"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->遇到的问题<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/qianduanjiankong/yipianjiangtouziyandeqianduancuowujiankong.html#空日志问题" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="空日志问题"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->空日志问题<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/qianduanjiankong/yipianjiangtouziyandeqianduancuowujiankong.html#日志丢失问题" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="日志丢失问题"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->日志丢失问题<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--]--></ul></div></div></div></div><!----><!----><!--]--></div>
    <script type="module" src="/assets/app-ff2f634e.js" defer></script>
  </body>
</html>
