import{_ as s,r as l,o as a,c as o,b as e,d as i,e as d,a as t}from"./app-ff2f634e.js";const c={},r=e("h1",{id:"ä¸€ã€husky",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#ä¸€ã€husky","aria-hidden":"true"},"#"),i(" ä¸€ã€husky")],-1),u=e("blockquote",null,[e("p",null,"æ³¨ï¼šæœ¬æ–‡å¼•å…¥çš„ husky éƒ½æ˜¯ 8.0.0 ä»¥ä¸Šçš„ç‰ˆæœ¬ï¼Œè€ç‰ˆæœ¬çš„ä½¿ç”¨å¯èƒ½ä¸ä¸‹æ–‡æè¿°çš„ä¸ä¸€è‡´ï¼")],-1),p=e("h2",{id:"_1-husky-æ˜¯ä»€ä¹ˆ",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#_1-husky-æ˜¯ä»€ä¹ˆ","aria-hidden":"true"},"#"),i(" 1. husky æ˜¯ä»€ä¹ˆï¼Ÿ")],-1),h={href:"https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftypicode%2Fhusky",title:"https://github.com/typicode/husky",target:"_blank",rel:"noopener noreferrer"},m=e("blockquote",null,[e("p",null,[i("Modern native Git hooks made easy (è½»æ¾åˆ›å»ºç°ä»£åŒ–çš„åŸç”Ÿ git hooks) Husky improves your commits and moreÂ ğŸ¶Â "),e("em",null,"woof!")])],-1),g=e("p",null,"æœ€é‡è¦çš„å°±æ˜¯ï¼šå®ƒå¯ä»¥åœ¨é¡¹ç›®ä¸­æ¤å…¥ä½ è®¾å®šçš„ git hooksï¼Œåœ¨ git æäº¤ä»£ç çš„å‰åï¼Œä½ é¢„è®¾çš„ git hooks å¯ä»¥å¾—åˆ°æ‰§è¡Œï¼Œä»¥å¯¹ä»£ç ã€æ–‡ä»¶ç­‰è¿›è¡Œé¢„è®¾çš„æ£€æŸ¥ï¼Œä¸€æ—¦æ£€æŸ¥ä¸é€šè¿‡ï¼Œå°±å¯ä»¥é˜»æ­¢å½“å‰çš„ä»£ç æäº¤ï¼Œé¿å…äº†ä¸è§„èŒƒçš„ä»£ç å’Œ git æäº¤å‡ºç°åœ¨é¡¹ç›®ä¸­ã€‚",-1),v=e("blockquote",null,[e("p",null,"git hooks æ˜¯æœ¬åœ°çš„ï¼Œä¸ä¼šè¢«åŒæ­¥åˆ° git ä»“åº“é‡Œã€‚ä¸ºäº†ä¿è¯æ¯ä¸ªäººçš„æœ¬åœ°ä»“åº“éƒ½èƒ½æ‰§è¡Œé¢„è®¾çš„ git hooksï¼Œäºæ˜¯å°±æœ‰äº† huskyã€‚")],-1),k=e("h2",{id:"_2-husky-çš„ç‰¹æ€§",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#_2-husky-çš„ç‰¹æ€§","aria-hidden":"true"},"#"),i(" 2. husky çš„ç‰¹æ€§")],-1),b={href:"https://link.juejin.cn?target=https%3A%2F%2Ftypicode.github.io%2Fhusky%2F%23%2F%3Fid%3Dfeatures",title:"https://typicode.github.io/husky/#/?id=features",target:"_blank",rel:"noopener noreferrer"},y=t("<ul><li>é›¶ä¾èµ–ï¼Œè½»é‡çº§çš„ (6k)</li><li>ç”± git çš„æ–°ç‰¹æ€§æä¾›æ”¯æŒ</li><li>éµå¾ªå…³äº npm å’Œ Yarn è‡ªåŠ¨å®‰è£…çš„æœ€ä½³å®è·µ</li><li>æä¾›ç”¨æˆ·å‹å¥½çš„æ¶ˆæ¯æç¤º</li><li>æä¾›å¯é€‰çš„å®‰è£…</li><li>husky 4 æ”¯æŒï¼š <ul><li>macOS, Linux, Windows ä¸‰å¤§æ“ä½œç³»ç»Ÿ</li><li>Git GUI</li><li>è‡ªå®šä¹‰ç›®å½•</li><li>monorepo</li></ul></li></ul>",1),x={href:"https://link.juejin.cn?target=https%3A%2F%2Ftypicode.github.io%2Fhusky%2F%23%2F%3Fid%3Dfeatures",title:"https://typicode.github.io/husky/#/?id=features",target:"_blank",rel:"noopener noreferrer"},_=t(`<h2 id="_3-å¼•å…¥-husky" tabindex="-1"><a class="header-anchor" href="#_3-å¼•å…¥-husky" aria-hidden="true">#</a> 3. å¼•å…¥ husky</h2><p>è¿™é‡Œå…ˆä»‹ç»å¦‚ä½•å¼•å…¥å•ç‹¬çš„ huskyï¼Œä¸‹æ–‡ä¼šä»‹ç»å¦‚ä½•åŒæ—¶å¼•å…¥ husky å’Œ lint-stagedã€‚å¦‚æœä½ æœŸæœ›åŒæ—¶å¼•å…¥è¿™ä¸¤ä¸ªå·¥å…·ï¼Œå¯ä»¥å¿½ç•¥è¿™ä¸€å°èŠ‚ã€‚</p><h3 id="_3-1-ç©ºé¡¹ç›®" tabindex="-1"><a class="header-anchor" href="#_3-1-ç©ºé¡¹ç›®" aria-hidden="true">#</a> 3.1 ç©ºé¡¹ç›®</h3><p>å¦‚æœè¿˜æ²¡æœ‰åˆ›å»ºé¡¹ç›®ï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤ä¸­çš„æŸä¸€æ¡ï¼Œæ¥åˆå§‹åŒ–ä¸€ä¸ªå¸¦æœ‰ husky çš„é¡¹ç›®ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npx husky-init               # npm
npx husky-init               # Yarn 1
yarn dlx husky-init --yarn2  # Yarn 2+
pnpm dlx husky-init          # pnpm
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢çš„å‘½ä»¤æ‰§è¡Œå®Œä¹‹åï¼Œåªéœ€è¦å†æ‰§è¡Œå®‰è£…ä¾èµ–çš„å‘½ä»¤å³å¯ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npm install   # npm
yarn          # Yarn
pnpm install  # pnpm
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ˜¯å®˜æ–¹æ¨èçš„åšæ³•ã€‚å¦‚æœä½ æƒ³åœ¨ç›®å‰å·²æœ‰çš„é¡¹ç›®ä¸­å¼•å…¥ huskyï¼Œå¯å‚è€ƒä¸‹ä¸€èŠ‚ã€‚</p><h3 id="_3-2-å·²æœ‰é¡¹ç›®" tabindex="-1"><a class="header-anchor" href="#_3-2-å·²æœ‰é¡¹ç›®" aria-hidden="true">#</a> 3.2 å·²æœ‰é¡¹ç›®</h3><p>è¦æƒ³åœ¨å·²æœ‰çš„é¡¹ç›®ä¸­ä½¿ç”¨ huskyï¼Œå¯æŒ‰å¦‚ä¸‹æ­¥éª¤æ“ä½œï¼š</p><ol><li><p>å®‰è£… husky</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npm i husky -D # npm
yarn add husky -D # yarn
pnpm i husky -D # pnpm
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>å¯ç”¨ git hooks</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npx husky install # npm
pnpx husky install # pnpm
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>åŠ å…¥ husky prepare å‘½ä»¤</p><ul><li><p>ç›´æ¥åœ¨ <code>package.json</code> çš„ <code>scripts</code> é‡ŒåŠ ä¸Šå¦‚ä¸‹å‘½ä»¤ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>{
  &quot;scripts&quot;: {
    &quot;prepare&quot;: &quot;husky install&quot;
  }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ol><h2 id="_4-husky-çš„ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#_4-husky-çš„ä½¿ç”¨" aria-hidden="true">#</a> 4. husky çš„ä½¿ç”¨</h2><p><strong>å‰ç½®çŸ¥è¯†ï¼šgit hooks</strong></p>`,13),f={href:"https://link.juejin.cn?target=https%3A%2F%2Fgit-scm.com%2Fbook%2Fzh%2Fv2%2F%25E8%2587%25AA%25E5%25AE%259A%25E4%25B9%2589-Git-Git-%25E9%2592%25A9%25E5%25AD%2590",title:"https://git-scm.com/book/zh/v2/%E8%87%AA%E5%AE%9A%E4%B9%89-Git-Git-%E9%92%A9%E5%AD%90",target:"_blank",rel:"noopener noreferrer"},F=t(`<ul><li>å®¢æˆ·ç«¯ hooks <ul><li>æäº¤å·¥ä½œæµ <ul><li><code>pre-commit</code></li><li><code>prepare-commit-msg</code></li><li><code>commit-msg</code></li><li><code>post-commit</code></li></ul></li><li>email å·¥ä½œæµ <ul><li><code>applypatch-msg</code></li><li><code>pre-applypatch</code></li><li><code>post-applypatch</code></li></ul></li><li>å…¶å®ƒ <ul><li><code>pre-rebase</code></li><li><code>post-rewrite</code></li><li><code>post-checkout</code></li><li><code>post-merge</code></li><li><code>pre-push</code></li><li><code>pre-auto-gc</code></li></ul></li></ul></li><li>æœåŠ¡å™¨ç«¯ hooks <ul><li><code>pre-receive</code></li><li><code>update</code></li><li><code>post-receive</code></li></ul></li></ul><blockquote><p>æ³¨æ„ï¼šåœ¨å®¢æˆ·ç«¯ hooks ä¸­ï¼Œdeveloper å¯ä»¥é€šè¿‡ <code>git commit -m &quot;commit message&quot; -n</code> (-n ç­‰ä»·äº --no-verify) æ¥å¿½ç•¥æ‰ <code>pre-commit</code> hook çš„æ‰§è¡Œï¼</p></blockquote><p><strong>ä½¿ç”¨ husky</strong></p><p>ä½¿ç”¨ husky çš„æ—¶å€™ï¼Œæˆ‘ä»¬é€šå¸¸åªå…³æ³¨ <em>æäº¤å·¥ä½œæµ</em> çš„å‡ ä¸ª hooksï¼Œç”¨å¾—æœ€å¤šçš„ä¸€ä¸ªæ˜¯ <code>pre-commit</code>ã€‚</p><p>ä½¿ç”¨ hosky çš„æ—¶å€™ï¼Œé€šå¸¸æ˜¯ç”¨å®ƒæ¥åˆ›å»ºä¸€ç³»åˆ—çš„ git hooksï¼Œå¹¶åœ¨å¯¹åº”çš„æ–‡ä»¶ä¸­æ’°å†™ <code>shell</code> è„šæœ¬ä»£ç ã€‚</p><p>ä¸‹é¢æ˜¯å®˜æ–¹ç¤ºä¾‹ä¸­çš„ä¸€ä¸ªï¼Œåˆ›å»ºäº† <code>pre-commit</code> hook æ–‡ä»¶ã€‚</p><ul><li><p>åˆ›å»ºä¸€ä¸ª hook: <code>husky add &lt;file&gt; [cmd]</code></p><ul><li>file: æŒ‡å®šä¿å­˜å‘½ä»¤çš„æ–‡ä»¶ï¼Œé€šå¸¸æ˜¯åœ¨ <code>.husky</code> ç›®å½•ä¸‹</li><li>cmd: æŒ‡å®š git hooks çš„åå­—ï¼Œæœ€å¸¸ä½¿ç”¨çš„æ˜¯ <code>pre-commit</code></li></ul><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># åˆ›å»ºä¸€ä¸ª pre-commit çš„ hooks æ–‡ä»¶
npx husky add .husky/pre-commit &quot;npm test&quot; # npm
pnpx husky add .husky/pre-commit &quot;npm test&quot; # pnpm
git add .husky/pre-commit
# åˆ›å»ºå¥½è¿™ä¸ªæ–‡ä»¶ä¹‹åï¼Œä½ å°±å¯ä»¥æ ¹æ®ä½ çš„éœ€è¦å»ç¼–å†™è¿™ä¸ª shell è„šæœ¬äº†
å¤åˆ¶ä»£ç 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h1 id="äºŒã€lint-staged" tabindex="-1"><a class="header-anchor" href="#äºŒã€lint-staged" aria-hidden="true">#</a> äºŒã€lint-staged</h1><h2 id="_1-lint-staged-æ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#_1-lint-staged-æ˜¯ä»€ä¹ˆ" aria-hidden="true">#</a> 1. lint-staged æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p><strong>èƒŒæ™¯</strong></p><p>éšç€ Web å‰ç«¯å¼€å‘çš„é€æ¸å¤§å‰ç«¯åŒ–ï¼ŒWeb å‰ç«¯é¡¹ç›®çš„ä½“ç§¯å˜å¾—è¶Šæ¥è¶Šå¤§ï¼Œä¸€ä¸ªé¡¹ç›®çš„å‚ä¸è€…ä¹Ÿè¶Šæ¥è¶Šå¤šï¼Œå¯¹ä»£ç è§„èŒƒã€ä»£ç æ£€æŸ¥çš„è¦æ±‚è¶Šæ¥è¶Šé«˜ã€‚å› æ­¤è¶Šæ¥è¶Šå¤šçš„é¡¹ç›®è¦æ±‚ developer åœ¨æäº¤ä»£ç ä¹‹å‰ï¼Œå¿…é¡»è®©è‡ªå·±çš„ä»£ç é€šè¿‡å¦‚ ESLint, Stylelint ç­‰ä»£ç æ ¼å¼åŒ–å·¥å…·çš„æ ¼å¼åŒ– (è§„èŒƒåŒ–)ã€‚</p><p>åœ¨èµ·åˆçš„å¼€å‘è¿‡ç¨‹ä¸­ï¼Œé¡¹ç›®å°ï¼Œä»£ç é‡å°‘ï¼Œå…¨é‡è·‘ä¸€æ¬¡ lint çš„æ—¶é—´ä¹Ÿç›¸å¯¹è¾ƒçŸ­ã€‚ä½†éšç€é¡¹ç›®ä½“é‡çš„å¢å¤§ï¼Œå…¨é‡è·‘ä¸€æ¬¡ lint çš„æ—¶é—´è¶Šæ¥è¶Šé•¿ã€‚è€Œæˆ‘ä»¬éƒ½çŸ¥é“ï¼Œå¦‚æœæ¯ä¸€ä¸ªäººæäº¤çš„ä»£ç éƒ½æ˜¯é€šè¿‡äº† lint å·¥å…·çš„æ ¼å¼åŒ–ï¼Œé‚£ä¹ˆåœ¨ä¸€æ¬¡æäº¤çš„æ—¶å€™ï¼Œå¯èƒ½æ²¡æœ‰è§„èŒƒåŒ–çš„æ–‡ä»¶ï¼Œå°±ä»…ä»…æ˜¯å½“å‰ developer å³å°†æäº¤çš„è¿™äº›ã€‚å¦‚æœåœ¨ä¸€æ¬¡æäº¤çš„æ—¶å€™ï¼Œåªå¯¹è¿™ä¸€éƒ¨åˆ†ä»£ç åšè§„èŒƒåŒ–ï¼Œé‚£å°†å¤§å¤§ç¼©çŸ­ developer æäº¤ä»£ç çš„é€Ÿåº¦ï¼Œäºæ˜¯å°±è¯ç”Ÿäº†ä¸€ä¸ªå·¥å…·ï¼š<code>lint-staged</code>ã€‚</p><p><strong>ä»‹ç»</strong></p><p>é€šè¿‡è¿™ä¸ªå·¥å…·è¯ç”Ÿçš„èƒŒæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œ <code>lint-staged</code> æ˜¯ä¸€ä¸ªä¸“é—¨ç”¨äºåœ¨é€šè¿‡ <code>git</code> æäº¤ä»£ç ä¹‹å‰ï¼Œå¯¹æš‚å­˜åŒºçš„ä»£ç æ‰§è¡Œä¸€ç³»åˆ—çš„æ ¼å¼åŒ–ã€‚å½“ <code>lint-staged</code> é…åˆ git hooks ä½¿ç”¨æ—¶ï¼Œå¯ä»¥åœ¨ git æäº¤å‰çš„ hook ä¸­åŠ å…¥ <code>lint-staged</code> å‘½ä»¤ï¼Œè¿™æ ·å°±èƒ½åœ¨æäº¤ä»£ç ä¹‹å‰ï¼Œå¯¹å³å°†æäº¤çš„ä»£ç è¿›è¡Œæ ¼å¼åŒ–ï¼ŒæˆåŠŸä¹‹åå°±ä¼šæäº¤ä»£ç ã€‚</p><h2 id="_2-å¼•å…¥-lint-staged" tabindex="-1"><a class="header-anchor" href="#_2-å¼•å…¥-lint-staged" aria-hidden="true">#</a> 2. å¼•å…¥ lint-staged</h2><p>ç›´æ¥æ‰§è¡Œä¸‹é¢çš„è„šæœ¬æ¥å®‰è£… <code>lint-staged</code> å³å¯ã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npm i lint-staged -D # npm
yarn add lint-staged -D # yarn
pnpm i lint-staged -D # pnpm
å¤åˆ¶ä»£ç 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-lint-staged-çš„ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#_3-lint-staged-çš„ä½¿ç”¨" aria-hidden="true">#</a> 3. lint-staged çš„ä½¿ç”¨</h2><p>é…ç½®æ–¹å¼ï¼š</p><ul><li><code>package.json</code> ä¸­çš„ <code>lint-staged</code> é…ç½®é¡¹</li><li>JSON é£æ ¼æˆ– YML é£æ ¼çš„ <code>.lintstagedrc</code><ul><li><code>.lintstagedrc.json</code></li><li><code>.lintstagedrc.yaml</code></li><li><code>.lintstagedrc.yml</code></li></ul></li><li><code>.lintstagedrc.mjs</code> æˆ– <code>.lintstagedrc.config.mjs</code></li><li><code>.lintstagedrc.cjs</code> æˆ– <code>.lintstagedrc.config.cjs</code></li><li><code>lint-staged.js</code> æˆ– <code>lint-staged.config.js</code></li></ul><p>ä»¥ <code>package.json</code> ä¸ºä¾‹ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>{
  &quot;lint-staged&quot;: {
    &quot;&lt;glob-pattern&gt;&quot;: &lt;command&gt;
  }
}
å¤åˆ¶ä»£ç 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p><code>&lt;command&gt;</code> å¯ä»¥æ˜¯å•ä¸ªå‘½ä»¤çš„å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥å¤šä¸ªå‘½ä»¤ç»„æˆçš„æ•°ç»„ã€‚ä½¿ç”¨ js ä½œä¸ºé…ç½®æ–‡ä»¶æ—¶ï¼Œè¿˜å¯ä»¥æ˜¯å¯¼å‡ºä¸€ä¸ªå¦‚ä¸‹ç±»å‹çš„å‡½æ•°ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code> (filenames: string[]) =&gt; string | string[] | Promise&lt;string | string[]&gt;
å¤åˆ¶ä»£ç 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p>è™½ç„¶é…ç½®å¥½äº† <code>lint-staged</code>ï¼Œä½†ç›®å‰è¿˜ä¸èƒ½è‡ªåŠ¨åœ°ä½¿ç”¨å®ƒï¼Œå› ä¸ºé€šå¸¸å®ƒæ˜¯æ”¾åœ¨ Git çš„ pre-commit é˜¶æ®µå»æ‰§è¡Œï¼Œå› æ­¤è¦åœ¨ <em>.husky/pre-commit</em> æ–‡ä»¶ä¸­å¢åŠ æ‰§è¡Œ <code>lint-staged</code> çš„å‘½ä»¤</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># å¦‚æœä½¿ç”¨çš„æ˜¯ npm/yarn ä¸” npm ç‰ˆæœ¬ä¸º v8 åŠä»¥ä¸‹ï¼Œå°±åŠ ä¸‹é¢çš„å‘½ä»¤
npx lint-staged
 # å¦‚æœä½¿ç”¨çš„æ˜¯ npm/yarn ä¸” npm ç‰ˆæœ¬ä¸º v9 åŠä»¥ä¸Šï¼Œå°±åŠ ä¸‹é¢çš„å‘½ä»¤
npm exec lint-staged
 # å¦‚æœä½¿ç”¨çš„æ˜¯ pnpmï¼Œå°±åŠ ä¸‹é¢çš„å‘½ä»¤
pnpm exec lint-staged
 # ! æ³¨æ„ï¼Œä¸Šé¢çš„è¿™ä¸‰ä¸ªå‘½ä»¤å¿…é¡»æ ¹æ®å®é™…æƒ…å†µæ¥é€‰æ‹©ï¼Œä¸”åªèƒ½å­˜åœ¨ä¸€ä¸ª

å¤åˆ¶ä»£ç 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="ä¸‰ã€å®‰è£…-husky-ä¸-lint-staged-å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€å®‰è£…-husky-ä¸-lint-staged-å‘½ä»¤" aria-hidden="true">#</a> ä¸‰ã€å®‰è£… husky ä¸ lint-staged å‘½ä»¤</h1><h2 id="æ³¨-ç‰ˆæœ¬æ›´æ–°" tabindex="-1"><a class="header-anchor" href="#æ³¨-ç‰ˆæœ¬æ›´æ–°" aria-hidden="true">#</a> æ³¨ï¼šç‰ˆæœ¬æ›´æ–°</h2><p>ç‰ˆæœ¬æ›´æ–°åï¼Œç›´æ¥æ‰§è¡Œå‘½ä»¤</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npx mrm@2 lint-staged # npm/yarn
pnpx mrm@2 lint-staged # pnpm
å¤åˆ¶ä»£ç 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ—¶ï¼Œåªä¼šè¡¥å…… <code>husky</code> å’Œ <code>lint-staged</code> çš„å‘½ä»¤ï¼Œä¸å†å®‰è£…è¿™ä¸¤ä¸ªä¾èµ–ã€‚</p><p>å› æ­¤å¦‚æœæƒ³åŒæ—¶é›†æˆè¿™ä¸¤ä¸ªä¾èµ–ï¼Œè¿˜éœ€åœ¨ä¸Šè¿°å‘½ä»¤æ‰§è¡Œå®Œä¹‹å‰ï¼Œå…ˆæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npm i husky lint-staged -D # npm
yarn add husky lint-staged -D # yarn
pnpm i husky lint-staged -D # pnpm
å¤åˆ¶ä»£ç 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-1-é›†æˆæ–¹å¼" tabindex="-1"><a class="header-anchor" href="#_3-1-é›†æˆæ–¹å¼" aria-hidden="true">#</a> 3.1 é›†æˆæ–¹å¼</h2><p>äºŒè€…çš„å®˜æ–¹éƒ½æ¨èäº†ä½¿ç”¨ <code>mrm</code> è¿™ä¸ªåº“æ¥åŒæ—¶é›†æˆ husky å’Œ lint-stagedã€‚</p><p>åœ¨ä½ çš„é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œç›´æ¥æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npx mrm@2 lint-staged # npm/yarn
pnpx mrm@2 lint-staged # pnpm
å¤åˆ¶ä»£ç 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‰§è¡Œå‘½ä»¤ä¹‹åï¼Œä½ å°±ä¼šçœ‹åˆ°ä½ çš„ <code>package.json</code> é‡Œå¤šäº†ä¸€ä¸ª <code>lint-staged</code> é…ç½®é¡¹ï¼Œä¸”æ ¹ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ª <code>.husky</code> ç›®å½•ï¼Œé‡Œé¢å°±åŒ…å«äº† <em>pre-commit</em> æ–‡ä»¶ï¼Œé‡Œé¢åŒ…å«äº†ä¸€ä¸ªæœ€åŸºç¡€çš„å‘½ä»¤ï¼š<code>npx lint-staged</code>ã€‚</p><p>åœ¨åç»­çš„å¼€å‘å·¥ä½œä¸­ï¼Œä»»ä½•éœ€è¦åœ¨ pre-commit é˜¶æ®µæ‰§è¡Œçš„å‘½ä»¤ï¼Œéƒ½å¯ä»¥æ·»åŠ åˆ° <em>.husky/pre-commit</em> æ–‡ä»¶ä¸­ã€‚</p><h1 id="å››ã€æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#å››ã€æ€»ç»“" aria-hidden="true">#</a> å››ã€æ€»ç»“</h1>`,39),j={href:"https://link.juejin.cn?target=https%3A%2F%2Ftypicode.github.io%2Fhusky%2F%23%2F",title:"https://typicode.github.io/husky/#/",target:"_blank",rel:"noopener noreferrer"},q={href:"https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fokonet%2Flint-staged%23readme",title:"https://github.com/okonet/lint-staged#readme",target:"_blank",rel:"noopener noreferrer"},A=e("em",null,".husky",-1),E=e("code",null,"package.json",-1),D=e("em",null,"lint-staged",-1),G=t('<p>åœ¨ <em>.husky/pre-commit</em> æ–‡ä»¶ä¸­å­˜åœ¨</p><h2 id="é™„-npx-æŸ¥æ‰¾è§„åˆ™" tabindex="-1"><a class="header-anchor" href="#é™„-npx-æŸ¥æ‰¾è§„åˆ™" aria-hidden="true">#</a> é™„ï¼šnpx æŸ¥æ‰¾è§„åˆ™</h2><ol><li>å» <code>/node_modules/.bin</code> ç›®å½•ä¸‹æŸ¥æ‰¾æ˜¯å¦å­˜åœ¨å¯¹åº”çš„å‘½ä»¤ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°åˆ™æ‰§è¡Œç¬¬ 2 æ­¥ï¼›</li><li>å»æŸ¥æ‰¾å…¨å±€å®‰è£…çš„å‘½ä»¤é‡Œæ˜¯å¦æœ‰å¯¹åº”çš„å‘½ä»¤ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°åˆ™æ‰§è¡Œç¬¬ 3 æ­¥ï¼›</li><li>åˆ›å»ºä¸€ä¸ªä¸´æ—¶ç›®å½•ï¼Œä¸‹è½½å‘½ä»¤å¯¹åº”çš„ä¾èµ–ï¼Œç„¶åæ‰§è¡Œè¿™ä¸ªå‘½ä»¤ï¼Œå®Œæˆä¹‹åå°±åˆ é™¤è¿™ä¸ªä¸´æ—¶ç›®å½•ã€‚</li></ol><p>äº†è§£äº†è¿™ä¸ªè§„åˆ™ä¹‹åï¼Œå°±å¯ä»¥æ”¾å¿ƒåœ°ä½¿ç”¨ <code>npx</code> æ¥æ‰§è¡Œä¸€äº›å‘½ä»¤äº†ã€‚å¦‚æœæœŸæœ›é¡¹ç›®é‡Œçš„å‘½ä»¤åœ¨æ¯ä¸€ä¸ª developer é‚£é‡Œéƒ½èƒ½æœ‰ç›¸åŒçš„è¡¨ç°ï¼Œå¢™è£‚å»ºè®®åœ¨é¡¹ç›®å†…ç»Ÿä¸€å®‰è£…å¯¹åº”çš„ dependencyã€‚</p>',4);function z(S,B){const n=l("ExternalLinkIcon");return a(),o("div",null,[r,u,p,e("p",null,[i("husky çš„ "),e("a",h,[i("README"),d(n)]),i(" å¼€ç¯‡æ˜¯è¿™ä¹ˆæè¿°çš„ï¼š")]),m,g,v,k,e("p",null,[i("husky çš„ "),e("a",b,[i("å®˜æ–¹æ–‡æ¡£"),d(n)]),i(" æ˜¯è¿™ä¹ˆæè¿°çš„ (ç›´è¯‘)ï¼š")]),y,e("p",null,[e("a",x,[i("å®˜æ–¹æ–‡æ¡£"),d(n)]),i(" åˆ—ä¸¾äº†éå¸¸å¤šç‰›Xè½°è½°çš„é¡¹ç›®åœ¨ä½¿ç”¨ huskyã€‚")]),_,e("p",null,[e("a",f,[i("git hooks"),d(n)]),i(" çš„åˆ†ç±»å¦‚ä¸‹")]),F,e("p",null,[i("æœ¬æ–‡è¯¦ç»†ä»‹ç»äº† "),e("a",j,[i("husky"),d(n)]),i(" å’Œ "),e("a",q,[i("lint-staged"),d(n)]),i(" çš„é›†æˆã€‚æˆåŠŸé›†æˆè¿™ä¸¤ä¸ªå·¥å…·ä¹‹åï¼Œåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ä¼šå¤šå‡º "),A,i(" ç›®å½•ï¼Œåœ¨ "),E,i(" ä¸­ä¼šå¤šå‡º "),D,i(" é…ç½®é¡¹ã€‚")]),G])}const N=s(c,[["render",z],["__file","husky yu lint-stagedanzhuangyupeizhi.html.vue"]]);export{N as default};
